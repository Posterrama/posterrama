<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Admin Posterrama - Configure your media screensaver settings, manage Plex integration, and customize display options.">
    <meta name="author" content="Admin Posterrama">
    <meta name="robots" content="noindex, nofollow">
    <meta name="theme-color" content="#0a0a0a">
    <meta name="color-scheme" content="dark">
    <title>Admin Posterrama</title>
    
    <!-- Open Graph meta tags -->
    <meta property="og:title" content="Admin Posterrama">
    <meta property="og:description" content="Configure your media screensaver settings, manage Plex integration, and customize display options.">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Admin Posterrama">
    
    <!-- Twitter Card meta tags -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Admin Posterrama">
    <meta name="twitter:description" content="Configure your media screensaver settings and Plex integration.">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="/admin.html">
    
    <!-- DNS prefetch for external resources -->
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://fonts.gstatic.com">
    <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">
    
    <!-- Optimized font loading with font-display swap -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    
    <!-- Local CSS with versioning -->
    <link rel="stylesheet" href="/admin.css?v=20250817b&cb=1755384925&mobilefinal=1">
    
    <!-- Font Awesome with SRI for security -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer">
    
    <!-- Preload critical JavaScript -->
    <link rel="preload" href="/admin.js?v=20250817b&cb=1755384925&mobilefinal=1" as="script">
    
    <!-- IMMEDIATE desktop sidebar fix - disable toggle functionality on desktop -->
    <script>
        (function() {
            function isMobile() {
                return window.innerWidth <= 768;
            }
            
            function removeDesktopToggles() {
                if (isMobile()) {
                    // On mobile: Hide entire sidebar
                    const sidebar = document.getElementById('sidebar');
                    if (sidebar) {
                        sidebar.style.display = 'none';
                    }
                    
                    // Hide sidebar overlay
                    const overlay = document.getElementById('sidebar-overlay');
                    if (overlay) {
                        overlay.style.display = 'none';
                    }
                    
                    // Adjust main content to full width
                    const mainContent = document.querySelector('.admin-main');
                    if (mainContent) {
                        mainContent.style.marginLeft = '0';
                        mainContent.style.width = '100%';
                    }
                    
                    // Adjust header to full width
                    const header = document.querySelector('.admin-header');
                    if (header) {
                        header.style.left = '0';
                        header.style.width = '100%';
                    }
                } else {
                    // On desktop: Disable toggle functionality
                    const sidebar = document.getElementById('sidebar');
                    if (sidebar && !sidebar.classList.contains('sidebar-always-open')) {
                        sidebar.classList.add('sidebar-always-open');
                    }
                    
                    // Disable any toggle buttons
                    const toggleButtons = document.querySelectorAll('.sidebar-toggle');
                    toggleButtons.forEach(button => {
                        button.disabled = true;
                        button.style.display = 'none';
                    });
                }
            }
            
            // Execute immediately
            removeDesktopToggles();
            
            // Execute on DOM ready
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', removeDesktopToggles);
            } else {
                removeDesktopToggles();
            }
            
            // Execute on window resize
            window.addEventListener('resize', removeDesktopToggles);
        })();
    </script>
    </script>
</head>
<body>
    
    <div class="admin-layout">
        <!-- Header -->
        <header class="admin-header" role="banner">
            <!-- Mobile menu button - only visible on mobile -->
            <button type="button" id="mobile-nav-toggle" class="mobile-nav-btn mobile-only">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
                    <path d="M6 2H16L14 22H4L6 2Z"/>
                    <path d="M10 2H20L18 22H8L10 2Z" style="mix-blend-mode: screen; opacity: 0.6;"/>
                </svg>
            </button>
            
            <h1 class="logo-text"><span class="admin-text">Admin</span></h1>
            <nav role="navigation" class="header-nav">
                <!-- Restart Now button - only shown when restart is needed -->
                <button type="button" id="restart-now-btn" class="btn btn-warning" style="display: none;">
                    <i class="fas fa-sync-alt"></i>
                    Restart Now
                </button>
                <button type="button" id="toggle-help-panel" class="btn btn-secondary">
                    <i class="fas fa-question-circle"></i>
                    Help
                </button>
                <a href="/" target="_blank" class="btn btn-secondary" id="view-posterrama-btn">
                    <i class="fas fa-external-link-alt"></i>
                    View <span class="gradient-text">posterrama</span>
                </a>
                <a href="/api-docs" target="_blank" class="btn btn-secondary" id="api-docs-btn">
                    <i class="fas fa-book"></i>
                    API Docs
                </a>
                <a href="https://github.com/Posterrama/posterrama" target="_blank" class="btn btn-secondary" id="github-btn">
                    <i class="fab fa-github"></i>
                    GitHub
                </a>
                <a href="/admin/logout" class="btn btn-danger" id="logout-btn">
                    <i class="fas fa-sign-out-alt"></i>
                    Logout
                </a>
            </nav>
        </header>

        <!-- Sidebar Navigation -->
        <nav class="sidebar sidebar-always-open" id="sidebar" role="navigation">
            <!-- Desktop sidebar header - Fixed open -->
            <div class="sidebar-header desktop-only">
                <div class="sidebar-logo">
                    <span class="logo-text">posterrama</span>
                </div>
            </div>
            
            <div class="sidebar-nav" role="tablist">
                <button class="nav-item active" data-section="general" title="General Settings" role="tab" id="general-tab">
                    <i class="fas fa-cog nav-icon"></i>
                    <span class="nav-text">General</span>
                </button>
                
                <button class="nav-item" data-section="display" title="Display Settings" role="tab" id="display-tab">
                    <i class="fas fa-tv nav-icon"></i>
                    <span class="nav-text">Display</span>
                </button>
                
                                <button class="nav-item" data-section="media" title="Sources" role="tab" id="media-tab">
                    <i class="fas fa-database nav-icon"></i>
                    <span class="nav-text">Sources</span>
                </button>
                
                <button class="nav-item" data-section="authentication" title="Authentication" role="tab" id="authentication-tab">
                    <i class="fas fa-shield-alt nav-icon"></i>
                    <span class="nav-text">Authentication</span>
                </button>
                
                <button class="nav-item" data-section="promobox" title="Promobox Site" role="tab" id="promobox-tab">
                    <i class="fas fa-globe nav-icon"></i>
                    <span class="nav-text">Promobox Site</span>
                </button>
                
                <button class="nav-item" data-section="management" title="Management" role="tab" id="management-tab">
                    <i class="fas fa-tools nav-icon"></i>
                    <span class="nav-text">Management</span>
                </button>
                
                <button class="nav-item" data-section="logs" title="Logs & Debug" role="tab" id="logs-tab">
                    <i class="fas fa-file-alt nav-icon"></i>
                    <span class="nav-text">Logs & Debug</span>
                </button>
            </div>
        </nav>

        <!-- Sidebar overlay for mobile -->
        <div class="sidebar-overlay" id="sidebar-overlay"></div>

        <!-- Main Content Area -->
        <div class="main-content">
            <div id="admin-background-a" class="admin-background-layer"></div>
            <div id="admin-background-b" class="admin-background-layer"></div>
            <div class="admin-background-overlay"></div>

            <main class="admin-main" role="main" id="main-content" tabindex="-1">
                <div id="notification-area" class="notification-container" role="region"></div>

                <form id="config-form" role="form" novalidate>
                    <!-- General Settings Section -->
                    <section class="section-content active" id="general-section" role="tabpanel" tabindex="0">
                        <div class="section-main-content">
                            <div class="section-title">
                                <i class="fas fa-cog"></i>
                                General Settings
                            </div>
                            
                            <!-- Unified General Settings Container -->
                            <div class="form-section unified-section">
                                
                                <!-- Application Settings Subsection -->
                                <div class="subsection-header">
                                    <i class="fas fa-cogs"></i>
                                    Application Settings
                                </div>
                                <div class="subsection-content">
                                    <div class="form-group">
                                        <label for="transitionIntervalSeconds" title="How many seconds each poster is visible.">Transition Interval (seconds)</label>
                                        <div class="number-input-wrapper">
                                            <input type="number" id="transitionIntervalSeconds" name="transitionIntervalSeconds" min="1" max="300" step="1" required>
                                            <div class="number-controls" role="group">
                                                <button type="button" class="number-btn" id="increment-transitionIntervalSeconds">
                                                    <i class="fas fa-chevron-up"></i>
                                                </button>
                                                <button type="button" class="number-btn" id="decrement-transitionIntervalSeconds">
                                                    <i class="fas fa-chevron-down"></i>
                                                </button>
                                            </div>
                                        </div>
                                        <div id="transitionIntervalSeconds-help" class="form-help">Time in seconds between poster transitions (1-300)</div>
                                    </div>
                                    <div class="form-group">
                                        <label for="backgroundRefreshMinutes">Background Refresh</label>
                                        <div class="number-input-wrapper">
                                            <input type="number" id="backgroundRefreshMinutes" name="backgroundRefreshMinutes" min="0" max="1440" step="1">
                                            <div class="number-controls" role="group">
                                                <button type="button" class="number-btn" id="increment-backgroundRefreshMinutes">
                                                    <i class="fas fa-chevron-up"></i>
                                                </button>
                                                <button type="button" class="number-btn" id="decrement-backgroundRefreshMinutes">
                                                    <i class="fas fa-chevron-down"></i>
                                                </button>
                                            </div>
                                        </div>
                                        <div id="backgroundRefreshMinutes-help" class="form-help">How often to refresh background images (0 to disable, max 1440 minutes)</div>
                                    </div>
                                </div>
                                
                                <!-- Server Configuration Subsection -->
                                <div class="subsection-header">
                                    <i class="fas fa-server"></i>
                                    Server Configuration
                                </div>
                                <div class="subsection-content">
                                    <div class="form-group">
                                        <label for="SERVER_PORT">Application Port</label>
                                        <div class="number-input-wrapper">
                                            <input type="number" id="SERVER_PORT" name="SERVER_PORT" min="1024" max="65535" step="1" required>
                                            <div class="number-controls" role="group">
                                                <button type="button" class="number-btn" id="increment-serverPort">
                                                    <i class="fas fa-chevron-up"></i>
                                                </button>
                                                <button type="button" class="number-btn" id="decrement-serverPort">
                                                    <i class="fas fa-chevron-down"></i>
                                                </button>
                                            </div>
                                        </div>
                                        <div id="serverPort-help" class="form-help">Port number for the application server (1024-65535)</div>
                                    </div>
                                </div>
                                
                                <!-- Development & Debug Subsection -->
                                <div class="subsection-header">
                                    <i class="fas fa-bug"></i>
                                    Development & Debug
                                </div>
                                <div class="subsection-content">
                                    <div class="form-group checkbox-group">
                                        <input type="checkbox" id="DEBUG" name="DEBUG">
                                        <label for="DEBUG">Enable Debug Mode</label>
                                    </div>
                                    <div id="DEBUG-help" class="form-help">Enable detailed logging for troubleshooting</div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Display Settings Section -->
                    <section class="section-content" id="display-section" role="tabpanel">
                        <div class="section-main-content">
                            <div class="section-title">
                                <i class="fas fa-tv"></i>
                                Display Settings
                            </div>
                            
                            <!-- Unified Display Settings Container -->
                            <div class="form-section unified-section">
                                
                                <!-- Cinema Mode Subsection -->
                                <div class="subsection-header">
                                    <i class="fas fa-film"></i>
                                    Cinema Mode
                                </div>
                                <div class="subsection-content">
                                    <div class="form-group checkbox-group">
                                        <input type="checkbox" id="cinemaMode" name="cinemaMode">
                                        <label for="cinemaMode">Enable Cinema Mode (Digital Movie Poster)</label>
                                    </div>
                                    <div class="form-group cinema-orientation-group hidden" id="cinemaOrientationGroup">
                                        <label for="cinemaOrientation">Cinema Display Orientation</label>
                                        <select id="cinemaOrientation" name="cinemaOrientation">
                                            <option value="auto">Auto (use device sensor)</option>
                                            <option value="portrait">Portrait</option>
                                            <option value="portrait-flipped">Portrait Flipped (180°)</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <!-- Visual Elements Subsection -->
                                <div class="subsection-header">
                                    <i class="fas fa-eye"></i>
                                    Visual Elements
                                </div>
                                <div class="subsection-content">
                                    <div class="form-grid-2">
                                        <div class="form-group checkbox-group">
                                            <input type="checkbox" id="showClearLogo" name="showClearLogo">
                                            <label for="showClearLogo">Show ClearLogo</label>
                                        </div>
                                        <div class="form-group checkbox-group">
                                            <input type="checkbox" id="showRottenTomatoes" name="showRottenTomatoes">
                                            <label for="showRottenTomatoes">Show Rotten Tomatoes Badge</label>
                                        </div>
                                        <div class="form-group checkbox-group">
                                            <input type="checkbox" id="showPoster" name="showPoster">
                                            <label for="showPoster">Show Poster</label>
                                        </div>
                                        <div class="form-group checkbox-group">
                                            <input type="checkbox" id="showMetadata" name="showMetadata">
                                            <label for="showMetadata">Show Metadata</label>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="rottenTomatoesMinimumScore">Minimum Rotten Tomatoes Score (0-10)</label>
                                        <input type="number" id="rottenTomatoesMinimumScore" name="rottenTomatoesMinimumScore" min="0" max="10" step="0.1">
                                    </div>
                                </div>
                                
                                <!-- Clock Widget Subsection -->
                                <div class="subsection-header">
                                    <i class="fas fa-clock"></i>
                                    Clock Widget
                                </div>
                                <div class="subsection-content">
                                    <div class="form-group checkbox-group">
                                        <input type="checkbox" id="clockWidget" name="clockWidget">
                                        <label for="clockWidget">Show Clock</label>
                                    </div>
                                    <div class="form-group clock-timezone-group hidden" id="clockTimezoneGroup">
                                        <label for="clockTimezone">Clock Timezone</label>
                                        <select id="clockTimezone" name="clockTimezone">
                                            <option value="auto">Auto (System Timezone)</option>
                                            <optgroup label="Common Timezones">
                                                <option value="Europe/Amsterdam">Europe/Amsterdam (CET/CEST)</option>
                                                <option value="Europe/London">Europe/London (GMT/BST)</option>
                                                <option value="Europe/Berlin">Europe/Berlin (CET/CEST)</option>
                                                <option value="Europe/Paris">Europe/Paris (CET/CEST)</option>
                                                <option value="America/New_York">America/New_York (EST/EDT)</option>
                                                <option value="America/Chicago">America/Chicago (CST/CDT)</option>
                                                <option value="America/Denver">America/Denver (MST/MDT)</option>
                                                <option value="America/Los_Angeles">America/Los_Angeles (PST/PDT)</option>
                                                <option value="Asia/Tokyo">Asia/Tokyo (JST)</option>
                                                <option value="Asia/Shanghai">Asia/Shanghai (CST)</option>
                                                <option value="Australia/Sydney">Australia/Sydney (AEST/AEDT)</option>
                                            </optgroup>
                                            <optgroup label="Additional Timezones">
                                                <option value="UTC">UTC (Coordinated Universal Time)</option>
                                                <option value="Africa/Cairo">Africa/Cairo (EET)</option>
                                                <option value="Africa/Johannesburg">Africa/Johannesburg (SAST)</option>
                                                <option value="America/Argentina/Buenos_Aires">America/Argentina/Buenos_Aires (ART)</option>
                                                <option value="America/Mexico_City">America/Mexico_City (CST/CDT)</option>
                                                <option value="America/Sao_Paulo">America/Sao_Paulo (BRT/BRST)</option>
                                                <option value="America/Toronto">America/Toronto (EST/EDT)</option>
                                                <option value="America/Vancouver">America/Vancouver (PST/PDT)</option>
                                                <option value="Asia/Bangkok">Asia/Bangkok (ICT)</option>
                                                <option value="Asia/Dubai">Asia/Dubai (GST)</option>
                                                <option value="Asia/Hong_Kong">Asia/Hong_Kong (HKT)</option>
                                                <option value="Asia/Jakarta">Asia/Jakarta (WIB)</option>
                                                <option value="Asia/Kolkata">Asia/Kolkata (IST)</option>
                                                <option value="Asia/Seoul">Asia/Seoul (KST)</option>
                                                <option value="Asia/Singapore">Asia/Singapore (SGT)</option>
                                                <option value="Asia/Taipei">Asia/Taipei (CST)</option>
                                                <option value="Australia/Brisbane">Australia/Brisbane (AEST)</option>
                                                <option value="Australia/Melbourne">Australia/Melbourne (AEST/AEDT)</option>
                                                <option value="Australia/Perth">Australia/Perth (AWST)</option>
                                                <option value="Europe/Athens">Europe/Athens (EET/EEST)</option>
                                                <option value="Europe/Istanbul">Europe/Istanbul (TRT)</option>
                                                <option value="Europe/Moscow">Europe/Moscow (MSK)</option>
                                                <option value="Europe/Rome">Europe/Rome (CET/CEST)</option>
                                                <option value="Europe/Stockholm">Europe/Stockholm (CET/CEST)</option>
                                                <option value="Europe/Zurich">Europe/Zurich (CET/CEST)</option>
                                                <option value="Pacific/Auckland">Pacific/Auckland (NZST/NZDT)</option>
                                                <option value="Pacific/Honolulu">Pacific/Honolulu (HST)</option>
                                            </optgroup>
                                        </select>
                                    </div>
                                    <div class="form-group clock-format-group hidden" id="clockFormatGroup">
                                        <label for="clockFormat">Clock Format</label>
                                        <select id="clockFormat" name="clockFormat">
                                            <option value="24h">24-hour format (23:45)</option>
                                            <option value="12h">12-hour format (11:45 PM)</option>
                                        </select>
                                    </div>
                                </div>
                        
                        <!-- UI Element Scaling Subsection -->
                        <div class="subsection-header">
                            <i class="fas fa-expand-arrows-alt"></i>
                            UI Element Scaling
                        </div>
                        <div class="subsection-content">
                            <!-- Scaling Templates -->
                            <div class="scaling-templates">
                                <label>Quick Templates:</label>
                                <div class="template-buttons" role="group">
                                    <button type="button" class="btn btn-secondary" id="apply-fullhd-template">Full HD</button>
                                    <button type="button" class="btn btn-secondary" id="apply-4k-template">4K</button>
                                    <button type="button" class="btn btn-secondary" id="apply-widescreen-template">Widescreen</button>
                                    <button type="button" class="btn btn-secondary" id="reset-scaling-defaults">Reset</button>
                                </div>
                            </div>
                            
                            <!-- Compact Scaling Grid -->
                            <div class="scaling-grid">
                                <div class="scaling-item">
                                    <label for="uiScaling.poster">Poster</label>
                                    <div class="slider-container">
                                        <input type="range" id="uiScaling.poster" name="uiScaling.poster" min="50" max="200" value="100" step="5">
                                        <div class="slider-track"></div>
                                        <div class="slider-fill"></div>
                                        <div class="slider-thumb"></div>
                                        <span class="slider-value" data-target="uiScaling.poster">100%</span>
                                    </div>
                                </div>
                                <div class="scaling-item">
                                    <label for="uiScaling.text">Text</label>
                                    <div class="slider-container">
                                        <input type="range" id="uiScaling.text" name="uiScaling.text" min="50" max="200" value="100" step="5">
                                        <div class="slider-track"></div>
                                        <div class="slider-fill"></div>
                                        <div class="slider-thumb"></div>
                                        <span class="slider-value" data-target="uiScaling.text">100%</span>
                                    </div>
                                </div>
                                <div class="scaling-item">
                                    <label for="uiScaling.clearlogo">Clearlogo</label>
                                    <div class="slider-container">
                                        <input type="range" id="uiScaling.clearlogo" name="uiScaling.clearlogo" min="50" max="200" value="100" step="5">
                                        <div class="slider-track"></div>
                                        <div class="slider-fill"></div>
                                        <div class="slider-thumb"></div>
                                        <span class="slider-value" data-target="uiScaling.clearlogo">100%</span>
                                    </div>
                                </div>
                                <div class="scaling-item">
                                    <label for="uiScaling.clock">Clock</label>
                                    <div class="slider-container">
                                        <input type="range" id="uiScaling.clock" name="uiScaling.clock" min="50" max="200" value="100" step="5">
                                        <div class="slider-track"></div>
                                        <div class="slider-fill"></div>
                                        <div class="slider-thumb"></div>
                                        <span class="slider-value" data-target="uiScaling.clock">100%</span>
                                    </div>
                                </div>
                                <div class="scaling-item">
                                    <label for="uiScaling.global">Global</label>
                                    <div class="slider-container">
                                        <input type="range" id="uiScaling.global" name="uiScaling.global" min="50" max="200" value="100" step="5">
                                        <div class="slider-track"></div>
                                        <div class="slider-fill"></div>
                                        <div class="slider-thumb"></div>
                                        <span class="slider-value" data-target="uiScaling.global">100%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                            
                            <!-- Effects & Transitions Subsection -->
                            <div class="subsection-header">
                                <i class="fas fa-magic"></i>
                                Effects & Transitions
                            </div>
                            <div class="subsection-content">
                                <div class="form-group">
                                    <label for="transitionEffect">Transition Effect</label>
                                    <select id="transitionEffect" name="transitionEffect">
                                        <option value="kenburns">Ken Burns</option>
                                        <option value="fade">Fade In/Out</option>
                                        <option value="slide">Slide Transition</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="effectPauseTime">Effect Pause Time (seconds)</label>
                                    <input type="number" id="effectPauseTime" name="effectPauseTime" min="0" max="10" step="0.5" value="2">
                                </div>
                            </div>
                        </div>
                        </div>
                    </section>

                    <!-- Sources Section -->
                    <section class="section-content" id="media-section" role="tabpanel">
                        <div class="section-main-content">
                            <div class="section-title">
                                <i class="fas fa-database"></i>
                                Content Sources
                            </div>
                            
                            <!-- Quick Navigation Links -->
            <div class="quick-nav-links">
                <div class="quick-nav-item">
                    <a href="#" class="quick-nav-link" onclick="scrollToSubsection('plex-subsection'); return false;" title="Plex Configuration">
                        <i class="fas fa-server"></i>
                    </a>
                    <span class="quick-nav-label">Plex</span>
                </div>
                <div class="quick-nav-item">
                    <a href="#" class="quick-nav-link" onclick="scrollToSubsection('tmdb-subsection'); return false;" title="TMDB Configuration">
                        <i class="fas fa-film"></i>
                    </a>
                    <span class="quick-nav-label">TMDB</span>
                </div>
                <div class="quick-nav-item">
                    <a href="#" class="quick-nav-link" onclick="scrollToSubsection('tvdb-subsection'); return false;" title="TVDB Configuration">
                        <i class="fas fa-tv"></i>
                    </a>
                    <span class="quick-nav-label">TVDB</span>
                </div>
            </div>                            <!-- Unified Sources Container -->
                            <div class="form-section unified-section">
                                
                                <!-- Plex Media Server Subsection -->
                                <div class="subsection-header" id="plex-subsection">
                                    <i class="fas fa-server"></i>
                                    Plex Media Server
                                </div>
                                <div class="subsection-content">
                                    <div class="form-group checkbox-group">
                                        <input type="checkbox" id="mediaServers[0].enabled" name="mediaServers[0].enabled">
                                        <label for="mediaServers[0].enabled">Enable Plex Server as Content Source</label>
                                    </div>
                                    <div class="form-group">
                                        <label for="mediaServers[0].hostname">Plex Hostname/IP</label>
                                        <input type="text" id="mediaServers[0].hostname" name="mediaServers[0].hostname" placeholder="192.168.1.10 or plex.local" pattern="^[a-zA-Z0-9\.\-]+$">
                                    </div>
                                    <div class="form-group">
                                        <label for="mediaServers[0].port">Plex Port</label>
                                        <input type="number" id="mediaServers[0].port" name="mediaServers[0].port" min="1" max="65535" placeholder="32400">
                                    </div>
                                    <div class="form-group">
                                        <label for="mediaServers[0].token">Plex Token</label>
                                        <input type="password" id="mediaServers[0].token" name="mediaServers[0].token">
                                    </div>
                                </div>
                                
                                <!-- Library Configuration Subsection -->
                                <div class="subsection-header">
                                    <i class="fas fa-folder-open"></i>
                                    Library Configuration
                                </div>
                                <div class="subsection-content">
                                    <div class="form-group">
                                        <label>Movie Library Names</label>
                                        <div id="movie-libraries-container" class="library-container">
                                            <small>Test the connection to fetch the libraries.</small>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label>Show Library Names</label>
                                        <div id="show-libraries-container" class="library-container">
                                            <small>Test the connection to fetch the libraries.</small>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="mediaServers[0].movieCount">Number of Movies to Show</label>
                                        <input type="number" id="mediaServers[0].movieCount" name="mediaServers[0].movieCount" min="1" max="10000" placeholder="100">
                                    </div>
                                    <div class="form-group">
                                        <label for="mediaServers[0].showCount">Number of Shows to Show</label>
                                        <input type="number" id="mediaServers[0].showCount" name="mediaServers[0].showCount" min="1" max="10000" placeholder="50">
                                    </div>
                                </div>
                                
                                <!-- Content Filtering Subsection -->
                                <div class="subsection-header" id="content-filtering-subsection">
                                    <i class="fas fa-filter"></i>
                                    Content Filtering
                                </div>
                                <div class="subsection-content">
                                    <div class="form-group">
                                        <label for="mediaServers[0].ratingFilter">Rating Filter</label>
                                        <select id="mediaServers[0].ratingFilter" name="mediaServers[0].ratingFilter">
                                            <option value="">All Ratings</option>
                                            <option value="G">G - General Audiences</option>
                                            <option value="PG">PG - Parental Guidance</option>
                                            <option value="PG-13">PG-13 - Parents Strongly Cautioned</option>
                                            <option value="R">R - Restricted</option>
                                            <option value="NC-17">NC-17 - Adults Only</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="mediaServers[0].genreFilter">Genre Filter</label>
                                        <div class="genre-filter-container">
                                            <select id="mediaServers[0].genreFilter" name="mediaServers[0].genreFilter" multiple class="genre-filter-select">
                                                <option value="">Loading genres...</option>
                                            </select>
                                            <button type="button" class="btn-clear-genres" id="clearGenresBtn" title="Clear all selected genres">
                                                <i class="fas fa-times"></i> Clear Selection
                                            </button>
                                        </div>
                                        <small class="genre-filter-help">💡 Tip: Hold Ctrl (Windows) or Cmd (Mac) while clicking to select multiple genres. Click "Clear Selection" to show all content.</small>
                                    </div>
                                    <div class="form-group checkbox-group">
                                        <input type="checkbox" id="mediaServers[0].recentlyAddedOnly" name="mediaServers[0].recentlyAddedOnly">
                                        <label for="mediaServers[0].recentlyAddedOnly">Show Only Recently Added Content</label>
                                    </div>
                                    <div class="form-group recently-added-days-group hidden" id="recentlyAddedDaysContainer">
                                        <label for="mediaServers[0].recentlyAddedDays">Recently Added (days)</label>
                                        <input type="number" id="mediaServers[0].recentlyAddedDays" name="mediaServers[0].recentlyAddedDays" min="1" max="365" placeholder="30" value="30">
                                    </div>
                                    <div class="form-group">
                                        <label for="mediaServers[0].qualityFilter">Quality Filter</label>
                                        <select id="mediaServers[0].qualityFilter" name="mediaServers[0].qualityFilter">
                                            <option value="">All Qualities</option>
                                            <option value="SD">SD - Standard Definition</option>
                                            <option value="720p">720p - HD Ready</option>
                                            <option value="1080p">1080p - Full HD</option>
                                            <option value="4K">4K - Ultra HD</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <!-- Connection Testing Subsection -->
                                <div class="subsection-header">
                                    <i class="fas fa-plug"></i>
                                    Connection Testing
                                </div>
                                <div class="subsection-content">
                                    <div class="form-group">
                                        <button type="button" id="test-plex-button" class="btn btn-primary">
                                            <i class="fas fa-plug icon"></i>
                                            <span>Test Plex Connection</span>
                                        </button>
                                        <small id="plex-connection-status"></small>
                                    </div>
                                </div>
                                
                                <!-- TMDB External Source Subsection -->
                                <div class="subsection-header" id="tmdb-subsection">
                                    <i class="fas fa-film"></i>
                                    TMDB External Source
                                </div>
                                <div class="subsection-content">
                                    <div class="form-group checkbox-group">
                                        <input type="checkbox" id="tmdbSource.enabled" name="tmdbSource.enabled">
                                        <label for="tmdbSource.enabled">Enable TMDB as Content Source</label>
                                    </div>
                                    <div class="form-group">
                                        <label for="tmdbSource.apiKey">TMDB API Key</label>
                                        <input type="password" id="tmdbSource.apiKey" name="tmdbSource.apiKey" placeholder="Your TMDB API v3 key">
                                        <small>Get a free API key from <a href="https://www.themoviedb.org/settings/api" target="_blank" rel="noopener">TMDB API Settings</a></small>
                                    </div>
                                    <div class="form-group">
                                        <label for="tmdbSource.category">Content Category</label>
                                        <select id="tmdbSource.category" name="tmdbSource.category">
                                            <optgroup label="🎬 Movies">
                                                <option value="popular">🔥 Popular Movies</option>
                                                <option value="top_rated">⭐ Top Rated Movies</option>
                                                <option value="now_playing">🎭 Now Playing</option>
                                                <option value="upcoming">📅 Upcoming Movies</option>
                                                <option value="latest">🆕 Latest Movies</option>
                                            </optgroup>
                                            <optgroup label="📺 TV Shows">
                                                <option value="tv_popular">🔥 Popular TV Shows</option>
                                                <option value="tv_top_rated">⭐ Top Rated TV Shows</option>
                                                <option value="tv_on_the_air">📡 Currently Airing</option>
                                                <option value="tv_airing_today">📺 Airing Today</option>
                                                <option value="tv_latest">🆕 Latest TV Shows</option>
                                            </optgroup>
                                            <optgroup label="🎯 Trending">
                                                <option value="trending_all_day">📈 Trending Today (All)</option>
                                                <option value="trending_movie_day">🎬 Trending Movies (Day)</option>
                                                <option value="trending_tv_day">📺 Trending TV (Day)</option>
                                                <option value="trending_all_week">📊 Trending Week (All)</option>
                                                <option value="trending_movie_week">🎬 Trending Movies (Week)</option>
                                                <option value="trending_tv_week">📺 Trending TV (Week)</option>
                                            </optgroup>
                                            <optgroup label="🏆 Collections">
                                                <option value="discover_movie">🔍 Discover Movies</option>
                                                <option value="discover_tv">🔍 Discover TV Shows</option>
                                            </optgroup>
                                        </select>
                                        <small class="help-text">🎯 Choose the type of content to fetch from TMDB. Trending shows what's hot right now!</small>
                                    </div>
                                    <div class="form-group">
                                        <label for="tmdbSource.movieCount">Number of Movies to Show</label>
                                        <input type="number" id="tmdbSource.movieCount" name="tmdbSource.movieCount" min="0" max="1000" placeholder="50">
                                    </div>
                                    <div class="form-group">
                                        <label for="tmdbSource.showCount">Number of TV Shows to Show</label>
                                        <input type="number" id="tmdbSource.showCount" name="tmdbSource.showCount" min="0" max="1000" placeholder="25">
                                    </div>
                                    <div class="form-group">
                                        <label for="tmdbSource.minRating">Minimum Rating (0-10)</label>
                                        <input type="number" id="tmdbSource.minRating" name="tmdbSource.minRating" min="0" max="10" step="0.1" placeholder="6.0">
                                    </div>
                                    <div class="form-group">
                                        <label for="tmdbSource.yearFilter">From Year</label>
                                        <input type="number" id="tmdbSource.yearFilter" name="tmdbSource.yearFilter" min="1900" max="2030" placeholder="2000">
                                    </div>
                                    <div class="form-group">
                                        <label for="tmdbSource.genreFilter">Genre Filter</label>
                                        <div class="genre-filter-container">
                                            <select id="tmdbSource.genreFilter" name="tmdbSource.genreFilter" multiple class="genre-filter-select">
                                                <option value="">Loading genres...</option>
                                            </select>
                                            <button type="button" class="btn-clear-genres" id="clearTmdbGenresBtn" title="Clear all selected genres">
                                                <i class="fas fa-times"></i> Clear Selection
                                            </button>
                                        </div>
                                        <small class="genre-filter-help">💡 Tip: Hold Ctrl (Windows) or Cmd (Mac) while clicking to select multiple genres. Click "Clear Selection" to show all content.</small>
                                    </div>
                                    <div class="form-group">
                                        <button type="button" id="test-tmdb-button" class="btn btn-primary">
                                            <i class="fas fa-plug icon"></i>
                                            <span>Test TMDB Connection</span>
                                        </button>
                                        <small id="tmdb-connection-status"></small>
                                    </div>
                                </div>
                                
                                <!-- Streaming Releases Subsection -->
                                <div class="external-source-subsection" data-source="streaming">
                                    <h4><i class="fas fa-stream"></i> Streaming Releases</h4>
                                    <p class="external-source-description">Add latest releases from popular streaming platforms using TMDB's streaming provider data.</p>
                                    
                                    <div class="form-group">
                                        <label class="checkbox-label">
                                            <input type="checkbox" id="streamingSources.enabled" name="streamingSources.enabled">
                                            Enable Streaming Releases
                                        </label>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="streamingSources.region">Region</label>
                                        <select id="streamingSources.region" name="streamingSources.region">
                                            <option value="US">🇺🇸 United States</option>
                                            <option value="NL">🇳🇱 Netherlands</option>
                                            <option value="GB">🇬🇧 United Kingdom</option>
                                            <option value="DE">🇩🇪 Germany</option>
                                            <option value="FR">🇫🇷 France</option>
                                            <option value="CA">🇨🇦 Canada</option>
                                            <option value="AU">🇦🇺 Australia</option>
                                            <option value="ES">🇪🇸 Spain</option>
                                            <option value="IT">🇮🇹 Italy</option>
                                            <option value="BR">🇧🇷 Brazil</option>
                                            <option value="MX">🇲🇽 Mexico</option>
                                            <option value="AR">🇦🇷 Argentina</option>
                                            <option value="JP">🇯🇵 Japan</option>
                                            <option value="KR">🇰🇷 South Korea</option>
                                            <option value="IN">🇮🇳 India</option>
                                            <option value="CN">🇨🇳 China</option>
                                            <option value="RU">🇷🇺 Russia</option>
                                            <option value="BE">🇧🇪 Belgium</option>
                                            <option value="AT">🇦🇹 Austria</option>
                                            <option value="CH">🇨🇭 Switzerland</option>
                                            <option value="SE">🇸🇪 Sweden</option>
                                            <option value="NO">🇳🇴 Norway</option>
                                            <option value="DK">🇩🇰 Denmark</option>
                                            <option value="FI">🇫🇮 Finland</option>
                                            <option value="PL">🇵🇱 Poland</option>
                                            <option value="CZ">🇨🇿 Czech Republic</option>
                                            <option value="HU">🇭🇺 Hungary</option>
                                            <option value="PT">🇵🇹 Portugal</option>
                                            <option value="GR">🇬🇷 Greece</option>
                                            <option value="TR">🇹🇷 Turkey</option>
                                            <option value="IL">🇮🇱 Israel</option>
                                            <option value="ZA">🇿🇦 South Africa</option>
                                            <option value="EG">🇪🇬 Egypt</option>
                                            <option value="SA">🇸🇦 Saudi Arabia</option>
                                            <option value="AE">🇦🇪 United Arab Emirates</option>
                                            <option value="TH">🇹🇭 Thailand</option>
                                            <option value="SG">🇸🇬 Singapore</option>
                                            <option value="MY">🇲🇾 Malaysia</option>
                                            <option value="ID">🇮🇩 Indonesia</option>
                                            <option value="PH">🇵🇭 Philippines</option>
                                            <option value="VN">🇻🇳 Vietnam</option>
                                            <option value="TW">🇹🇼 Taiwan</option>
                                            <option value="HK">🇭🇰 Hong Kong</option>
                                            <option value="NZ">🇳🇿 New Zealand</option>
                                            <option value="CL">🇨🇱 Chile</option>
                                            <option value="CO">🇨🇴 Colombia</option>
                                            <option value="PE">🇵🇪 Peru</option>
                                            <option value="VE">🇻🇪 Venezuela</option>
                                            <option value="UY">🇺🇾 Uruguay</option>
                                            <option value="EC">🇪🇨 Ecuador</option>
                                            <option value="BO">🇧🇴 Bolivia</option>
                                            <option value="PY">🇵🇾 Paraguay</option>
                                        </select>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label>Streaming Providers</label>
                                        <div class="streaming-providers-grid">
                                            <label class="checkbox-label streaming-provider">
                                                <input type="checkbox" id="streamingSources.netflix" name="streamingSources.netflix" value="8">
                                                <i class="fas fa-film"></i>
                                                <span>Netflix</span>
                                            </label>
                                            <label class="checkbox-label streaming-provider">
                                                <input type="checkbox" id="streamingSources.disney" name="streamingSources.disney" value="337">
                                                <i class="fas fa-magic"></i>
                                                <span>Disney+</span>
                                            </label>
                                            <label class="checkbox-label streaming-provider">
                                                <input type="checkbox" id="streamingSources.prime" name="streamingSources.prime" value="119">
                                                <i class="fab fa-amazon"></i>
                                                <span>Prime Video</span>
                                            </label>
                                            <label class="checkbox-label streaming-provider">
                                                <input type="checkbox" id="streamingSources.hbo" name="streamingSources.hbo" value="1899">
                                                <i class="fas fa-play-circle"></i>
                                                <span>Max (HBO)</span>
                                            </label>
                                            <label class="checkbox-label streaming-provider">
                                                <input type="checkbox" id="streamingSources.hulu" name="streamingSources.hulu" value="15">
                                                <i class="fas fa-tv"></i>
                                                <span>Hulu</span>
                                            </label>
                                            <label class="checkbox-label streaming-provider">
                                                <input type="checkbox" id="streamingSources.apple" name="streamingSources.apple" value="350">
                                                <i class="fab fa-apple"></i>
                                                <span>Apple TV+</span>
                                            </label>
                                            <label class="checkbox-label streaming-provider">
                                                <input type="checkbox" id="streamingSources.paramount" name="streamingSources.paramount" value="531">
                                                <i class="fas fa-mountain"></i>
                                                <span>Paramount+</span>
                                            </label>
                                            <label class="checkbox-label streaming-provider">
                                                <input type="checkbox" id="streamingSources.crunchyroll" name="streamingSources.crunchyroll" value="283">
                                                <i class="fas fa-dragon"></i>
                                                <span>Crunchyroll</span>
                                            </label>
                                            <label class="checkbox-label streaming-provider">
                                                <input type="checkbox" id="streamingSources.newReleases" name="streamingSources.newReleases" value="new">
                                                <i class="fas fa-star"></i>
                                                <span>New Releases (All)</span>
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="streamingSources.maxItems">Maximum Items per Provider</label>
                                        <input type="number" id="streamingSources.maxItems" name="streamingSources.maxItems" min="5" max="100" value="10">
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="streamingSources.minRating">Minimum Rating (0-10)</label>
                                        <input type="number" id="streamingSources.minRating" name="streamingSources.minRating" min="0" max="10" step="0.1" placeholder="6.0">
                                    </div>
                                    
                                    <div class="form-group">
                                        <button type="button" id="test-streaming-button" class="btn btn-primary">
                                            <i class="fas fa-stream icon"></i>
                                            <span>Test Streaming Connection</span>
                                        </button>
                                        <small id="streaming-connection-status"></small>
                                    </div>
                                </div>
                                
                                <!-- TVDB External Source Subsection -->
                                <div class="subsection-header" id="tvdb-subsection">
                                    <i class="fas fa-tv"></i>
                                    TVDB External Source
                                </div>
                                <div class="subsection-content">
                                    <div class="form-group checkbox-group">
                                        <input type="checkbox" id="tvdbSource.enabled" name="tvdbSource.enabled">
                                        <label for="tvdbSource.enabled">Enable TVDB as Content Source</label>
                                    </div>
                                    <div class="form-group">
                                        <label for="tvdbSource.category">Content Category</label>
                                        <select id="tvdbSource.category" name="tvdbSource.category">
                                            <optgroup label="🏆 By Rating & Popularity">
                                                <option value="top_rated">⭐ Top Rated</option>
                                                <option value="popular">🔥 Most Popular</option>
                                            </optgroup>
                                            <optgroup label="📅 By Date">
                                                <option value="recently_updated">🆕 Recently Updated</option>
                                                <option value="newest">📺 Newest Releases</option>
                                                <option value="oldest">📼 Classic Content</option>
                                            </optgroup>
                                            <optgroup label="📊 By Activity">
                                                <option value="trending">📈 Trending Now</option>
                                                <option value="recently_added">➕ Recently Added to TVDB</option>
                                            </optgroup>
                                            <optgroup label="🔤 Alphabetical">
                                                <option value="alphabetical">🔤 A-Z Order</option>
                                            </optgroup>
                                        </select>
                                        <small class="help-text">🎯 Choose how to sort and discover content from TVDB's extensive database!</small>
                                    </div>
                                    <div class="form-group number-input-group">
                                        <div class="form-group">
                                            <label for="tvdbSource.movieCount">Movies to Display</label>
                                            <input type="number" id="tvdbSource.movieCount" name="tvdbSource.movieCount" min="0" max="500" value="25">
                                        </div>
                                        <div class="form-group">
                                            <label for="tvdbSource.showCount">TV Shows to Display</label>
                                            <input type="number" id="tvdbSource.showCount" name="tvdbSource.showCount" min="0" max="500" value="50">
                                        </div>
                                    </div>
                                    <div class="form-group number-input-group">
                                        <div class="form-group">
                                            <label for="tvdbSource.minRating">Minimum Rating</label>
                                            <input type="number" id="tvdbSource.minRating" name="tvdbSource.minRating" min="0" max="10" step="0.1" value="0">
                                        </div>
                                        <div class="form-group">
                                            <label for="tvdbSource.yearFilter">Year Filter</label>
                                            <input type="number" id="tvdbSource.yearFilter" name="tvdbSource.yearFilter" min="1900" max="2030" placeholder="e.g. 2023">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="tvdbSource.genreFilter">Genre Filter</label>
                                        <div class="genre-filter-container">
                                            <select id="tvdbSource.genreFilter" name="tvdbSource.genreFilter" multiple class="genre-filter-select">
                                                <option value="">Loading genres...</option>
                                            </select>
                                            <button type="button" class="btn-clear-genres" id="clearTvdbGenresBtn" title="Clear all selected genres">
                                                <i class="fas fa-times"></i> Clear Selection
                                            </button>
                                        </div>
                                        <small class="genre-filter-help">💡 Tip: Hold Ctrl (Windows) or Cmd (Mac) while clicking to select multiple genres. Click "Clear Selection" to show all content.</small>
                                    </div>
                                    
                                    <!-- TVDB Connection Test -->
                                    <div class="form-group">
                                        <button type="button" id="test-tvdb-connection" class="btn btn-primary">
                                            <i class="fas fa-plug icon"></i>
                                            <span>Test TVDB Connection</span>
                                        </button>
                                        <small id="tvdb-connection-status"></small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Authentication Section -->
                    <section class="section-content" id="authentication-section" role="tabpanel">
                        <div class="section-main-content">
                            <div class="section-title">
                                <i class="fas fa-shield-alt"></i>
                                Authentication & Security
                            </div>
                            
                            <!-- Unified Authentication & Security Container -->
                            <div class="form-section unified-section">
                                
                                <!-- Password Management Subsection -->
                                <div class="subsection-header">
                                    <i class="fas fa-key"></i>
                                    Password Management
                                </div>
                                <div class="subsection-content">
                                    <div id="password-form">
                                        <div class="form-group">
                                            <label for="currentPassword">Current Password</label>
                                            <input type="password" id="currentPassword" name="currentPassword" autocomplete="current-password">
                                        </div>
                                        <div class="form-group">
                                            <label for="newPassword">New Password</label>
                                            <input type="password" id="newPassword" name="newPassword" autocomplete="new-password">
                                        </div>
                                        <div class="form-group">
                                            <label for="confirmPassword">Confirm New Password</label>
                                            <input type="password" id="confirmPassword" name="confirmPassword" autocomplete="new-password">
                                        </div>
                                        <div class="form-actions">
                                            <button type="button" id="change-password-button" class="btn btn-primary">
                                                <i class="fas fa-lock icon"></i>
                                                <span>Change Password</span>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Two-Factor Authentication Subsection -->
                                <div class="subsection-header">
                                    <i class="fas fa-mobile-alt"></i>
                                    Two-Factor Authentication (2FA)
                                </div>
                                <div class="subsection-content">
                                    <div class="form-group checkbox-group">
                                        <input type="checkbox" id="enable2FA" name="enable2FA">
                                        <label for="enable2FA">Setup Two-Factor Authentication</label>
                                    </div>
                                    <div id="2fa-status-text" class="status-text disabled"></div>
                                </div>
                                
                                <!-- API Access Management Subsection -->
                                <div class="subsection-header">
                                    <i class="fas fa-code"></i>
                                    API Access Management
                                </div>
                                <div class="subsection-content">
                                    <div class="form-group">
                                        <p>Manage a permanent API key for use with external applications or scripts (like Swagger).</p>
                                    </div>
                                    <div class="form-group" id="api-key-status">
                                        <p>Status: <span id="api-key-status-text" class="status-text">Loading...</span></p>
                                    </div>
                                    <div id="api-key-display-container" class="is-hidden form-group">
                                        <label>Current API Key:</label>
                                        <div class="api-key-display-container">
                                            <input id="api-key-input" type="password" readonly>
                                            <button id="toggle-api-key-visibility-button" type="button" class="btn btn-icon" title="Show/hide key">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                            <button id="copy-api-key-button" type="button" class="btn btn-icon" title="Copy to clipboard">
                                                <i class="fas fa-copy"></i>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="form-actions">
                                        <button id="generate-api-key-button" type="button" class="btn btn-primary">
                                            <i class="fas fa-key"></i>
                                            Generate New Key
                                        </button>
                                        <button id="revoke-api-key-button" type="button" class="btn btn-danger" disabled>
                                            <i class="fas fa-trash-alt"></i>
                                            Revoke Key
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Promobox Site Settings Section -->
                    <section class="section-content" id="promobox-section" role="tabpanel">
                        <div class="section-main-content">
                            <div class="section-title">
                                <i class="fas fa-globe"></i>
                                Promobox Site
                            </div>
                            
                            <!-- Unified Promobox Site Container -->
                            <div class="form-section unified-section">
                                
                                <!-- Site Configuration Subsection -->
                                <div class="subsection-header">
                                    <i class="fas fa-server"></i>
                                    Site Configuration
                                </div>
                                <div class="subsection-content">
                                    <div class="form-group checkbox-group">
                                        <input type="checkbox" id="siteServer.enabled" name="siteServer.enabled">
                                        <label for="siteServer.enabled">Enable Promobox Site</label>
                                    </div>
                                    <div class="form-group site-server-port-group" id="siteServerPortGroup">
                                        <label for="siteServer.port">Promobox Site Port</label>
                                        <input type="number" id="siteServer.port" name="siteServer.port" min="1024" max="65535" value="4001">
                                    </div>
                                </div>
                                
                                <!-- Site Status Subsection -->
                                <div class="subsection-header">
                                    <i class="fas fa-info-circle"></i>
                                    Site Status
                                </div>
                                <div class="subsection-content">
                                    <div id="siteServerStatus" class="status-indicator site-server-status">
                                        <div class="status-badge">
                                            <span class="status-icon">🌐</span>
                                            <span class="status-text">Promobox site running on <a href="http://localhost:4001" target="_blank" class="status-link">http://localhost:4001</a></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Management Section -->
                    <section class="section-content" id="management-section" role="tabpanel">
                        <div class="section-main-content">
                            <div class="section-title">
                                <i class="fas fa-tools"></i>
                                Management & Tools
                            </div>
                            
                            <!-- Unified Management & Tools Container -->
                            <div class="form-section unified-section">
                                
                                <!-- Cache Management Subsection -->
                                <div class="subsection-header">
                                    <i class="fas fa-database"></i>
                                    Cache Management
                                </div>
                                <div class="subsection-content">                                    
                                    <!-- Cache Size Display -->
                                    <div class="cache-stats-container" style="margin-bottom: 1rem;">
                                        <div class="stat-item">
                                            <div class="stat-label">
                                                <i class="fas fa-hdd"></i>
                                                Cache Storage
                                            </div>
                                            <div class="stat-value" id="cache-disk-usage">
                                                <span class="loading">Loading...</span>
                                            </div>
                                        </div>
                                        <div class="stat-item">
                                            <div class="stat-label">
                                                <i class="fas fa-memory"></i>
                                                Memory Cache
                                            </div>
                                            <div class="stat-value" id="cache-item-count">
                                                <span class="loading">Loading...</span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Cache Actions - 2x2 Grid Layout -->
                                    <div class="form-actions" style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.5rem;">
                                        <button type="button" id="refresh-cache-stats" class="btn btn-secondary">
                                            <i class="fas fa-sync-alt icon"></i>
                                            <span>Refresh Stats</span>
                                        </button>
                                        <button type="button" id="cleanup-cache-button" class="btn btn-secondary">
                                            <i class="fas fa-compress-alt icon"></i>
                                            <span>Run Cleanup</span>
                                        </button>
                                        <div id="debug-cache-action" class="is-hidden" style="grid-column: 1;">
                                            <a href="/admin/debug" target="_blank" class="btn btn-primary" style="width: 100%; display: flex; align-items: center;">
                                                <i class="fas fa-database"></i>
                                                View Cache
                                            </a>
                                        </div>
                                        <button type="button" id="clear-cache-button" class="btn btn-primary">
                                            <i class="fas fa-broom icon"></i>
                                            <span>Clear Cache</span>
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- Media Management Subsection -->
                                <div class="subsection-header">
                                    <i class="fas fa-sync-alt"></i>
                                    Media Management
                                </div>
                                <div class="subsection-content">
                                    <div class="form-actions">
                                        <button type="button" id="refresh-media-button" class="btn btn-primary" disabled>
                                            <i class="fas fa-sync-alt icon"></i>
                                            <span>Refresh Media</span>
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- Application Controls Subsection -->
                                <div class="subsection-header">
                                    <i class="fas fa-power-off"></i>
                                    Application Controls
                                </div>
                                <div class="subsection-content">
                                    <div class="form-actions form-actions-grid">
                                        <button type="button" id="restart-app-button" class="btn btn-danger">
                                            <i class="fas fa-power-off icon"></i>
                                            <span>Restart Application</span>
                                        </button>
                                        <button type="button" id="status-check-button" class="btn btn-primary">
                                            <i class="fas fa-heartbeat icon"></i>
                                            <span>Status Check</span>
                                        </button>
                                        <button type="button" id="performance-monitor-button" class="btn btn-info">
                                            <i class="fas fa-chart-line icon"></i>
                                            <span>Performance Monitor</span>
                                        </button>
                                    </div>
                                    
                                    <!-- Status Display Areas -->
                                    <div id="status-display" class="status-display" style="display: none;">
                                        <div class="status-header">
                                            <h4><i class="fas fa-heartbeat"></i> System Status</h4>
                                        </div>
                                        <div id="status-content" class="status-content">
                                            <div class="loading">Checking system status...</div>
                                        </div>
                                    </div>
                                    
                                    
                                    <div id="performance-display" class="status-display" style="display: none;">
                                        <div class="status-header">
                                            <h4><i class="fas fa-chart-line"></i> Performance Monitor</h4>
                                        </div>
                                        <div id="performance-content" class="status-content">
                                            <div class="loading">Loading performance data...</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Auto-Update Subsection -->
                                <div class="subsection-header">
                                    <i class="fas fa-download"></i>
                                    Automatic Updates
                                </div>
                                <div class="subsection-content">
                                    <!-- Update Status Display -->
                                    <div id="update-status-display" class="status-display">
                                        <div class="status-header">
                                            <h4><i class="fas fa-info-circle"></i> Update Status</h4>
                                        </div>
                                        <div id="update-status-content" class="status-content">
                                            <div id="update-idle-state">
                                                <div class="status-item">
                                                    <div class="status-item-header">Status</div>
                                                    <div class="status-item-value status-success">Ready for Updates</div>
                                                </div>
                                            </div>
                                            <div id="update-progress-state" style="display: none;">
                                                <div class="update-progress-container">
                                                    <div class="update-progress-header">
                                                        <span id="update-phase-text">Checking for updates...</span>
                                                        <span id="update-progress-percent">0%</span>
                                                    </div>
                                                    <div class="progress-bar">
                                                        <div id="update-progress-bar" class="progress-fill"></div>
                                                    </div>
                                                    <div id="update-message" class="update-message">
                                                        Preparing update process...
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Update Actions -->
                                    <div class="form-actions" style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.5rem; margin-top: 1rem;">
                                        <button type="button" id="start-auto-update-button" class="btn btn-primary">
                                            <i class="fas fa-download icon"></i>
                                            <span>Start Auto-Update</span>
                                        </button>
                                        <button type="button" id="rollback-update-button" class="btn btn-secondary">
                                            <i class="fas fa-undo icon"></i>
                                            <span>Rollback</span>
                                        </button>
                                    </div>
                                    
                                    <!-- Backup Management -->
                                    <div class="form-actions" style="display: flex; gap: 0.5rem; margin-top: 0.5rem;">
                                        <button type="button" id="list-backups-button" class="btn btn-secondary" style="flex: 1;">
                                            <i class="fas fa-archive icon"></i>
                                            <span>View Backups</span>
                                        </button>
                                    </div>
                                    
                                    <!-- Backup List Display -->
                                    <div id="backups-display" class="status-display" style="display: none; margin-top: 1rem;">
                                        <div class="status-header">
                                            <h4><i class="fas fa-archive"></i> Available Backups</h4>
                                        </div>
                                        <div id="backups-content" class="status-content">
                                            <div class="loading">Loading backups...</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Project & Support Subsection -->
                                <div class="subsection-header">
                                    <i class="fab fa-github"></i>
                                    Project & Support
                                </div>
                                <div class="subsection-content">
                                    <div class="project-info" style="margin-bottom: 1rem; padding: 1rem; background: rgba(255, 255, 255, 0.02); border-radius: 6px; border: 1px solid rgba(255, 255, 255, 0.1);">
                                        <h4 style="margin: 0 0 0.5rem 0; color: #fff; font-size: 0.95rem;">
                                            <i class="fas fa-heart" style="color: #e74c3c; margin-right: 0.5rem;"></i>
                                            Open Source Project
                                        </h4>
                                        <p style="margin: 0 0 1rem 0; color: #b3b3b3; font-size: 0.85rem; line-height: 1.4;">
                                            Posterrama is free and open source software. Help improve it by reporting issues, suggesting features, or contributing code.
                                        </p>
                                        <div class="form-actions" style="margin: 0;">
                                            <a href="https://github.com/Posterrama/posterrama" target="_blank" class="btn btn-primary" style="margin-right: 0.5rem;">
                                                <i class="fab fa-github"></i>
                                                View on GitHub
                                            </a>
                                            <a href="https://github.com/Posterrama/posterrama/issues" target="_blank" class="btn btn-secondary" style="margin-right: 0.5rem;">
                                                <i class="fas fa-bug"></i>
                                                Report Issue
                                            </a>
                                            <a href="https://github.com/Posterrama/posterrama/releases/latest" target="_blank" class="btn btn-secondary">
                                                <i class="fas fa-download"></i>
                                                Latest Release
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Logs & Debug Section -->
                    <section class="section-content" id="logs-section" role="tabpanel">
                        <div class="section-main-content">
                            <div class="section-title">
                                <i class="fas fa-file-alt"></i>
                                Logs & Debug
                            </div>
                            
                            <!-- Unified Logs & Debug Container -->
                            <div class="form-section unified-section">
                                
                                <!-- Debug Tools Subsection -->
                                <div class="subsection-header">
                                    <i class="fas fa-bug"></i>
                                    Debug Tools
                                </div>
                                <div class="subsection-content">
                                    <div class="form-actions">
                                        <a href="/admin/logs" target="_blank" class="btn btn-primary">
                                            <i class="fas fa-terminal"></i>
                                            View Live Logs
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                    
                    <!-- Save Settings Button -->
                    <div class="form-save-section">
                        <div id="config-status">
                            <i class="fas fa-check-circle"></i>
                            Ready to save
                        </div>
                        <button type="submit" id="save-config-button" class="btn btn-primary">
                            <i class="fas fa-save"></i>
                            <span>Save Settings</span>
                        </button>
                    </div>
                </form>

            </main>
        </div> <!-- Close main-content -->
        
    </div> <!-- Close admin-layout -->

    <!-- Mobile Navigation Panel - similar to help panel but for navigation -->
    <aside id="mobile-nav-panel" class="mobile-nav-panel mobile-only">
        <div class="mobile-nav-header">
            <h3>Navigation</h3>
            <button class="btn btn-icon" id="close-mobile-nav">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
        </div>
        <nav class="mobile-nav-content">
            <button class="mobile-nav-item active" data-section="general">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="3"></circle>
                    <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1.06 1.56V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.35a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.56-1.06H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.65 9 1.65 1.65 0 0 0 4.32 7.18l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1.06-1.56V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1.06 1.56 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.56 1.06H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.56 1.06z"></path>
                </svg>
                <span>General</span>
            </button>
            <button class="mobile-nav-item" data-section="display">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
                    <line x1="8" y1="21" x2="16" y2="21"></line>
                    <line x1="12" y1="17" x2="12" y2="21"></line>
                </svg>
                <span>Display</span>
            </button>
            <button class="mobile-nav-item" data-section="media">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <ellipse cx="12" cy="5" rx="9" ry="3"></ellipse>
                    <path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"></path>
                    <path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"></path>
                </svg>
                <span>Sources</span>
            </button>
            <button class="mobile-nav-item" data-section="authentication">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                </svg>
                <span>Authentication</span>
            </button>
            <button class="mobile-nav-item" data-section="promobox">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10"></circle>
                    <line x1="2" y1="12" x2="22" y2="12"></line>
                    <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
                </svg>
                <span>Promobox Site</span>
            </button>
            <button class="mobile-nav-item" data-section="management">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path>
                </svg>
                <span>Management</span>
            </button>
            <button class="mobile-nav-item" data-section="logs">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                    <polyline points="14,2 14,8 20,8"></polyline>
                    <line x1="16" y1="13" x2="8" y2="13"></line>
                    <line x1="16" y1="17" x2="8" y2="17"></line>
                    <polyline points="10,9 9,9 8,9"></polyline>
                </svg>
                <span>Logs & Debug</span>
            </button>
        </nav>
    </aside>

    <!-- Quick Help Panel -->
    <aside id="quick-help-panel" class="quick-help-panel" role="dialog">
        <div class="help-header">
            <h3 id="help-title">General Settings Help</h3>
            <button class="btn btn-icon" id="close-help-panel">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="help-content" id="help-content" role="document">
            <div class="help-section">
                <h4>Transition Interval</h4>
                <p>Controls how long each poster is displayed before switching to the next one. Set between 1-300 seconds. Shorter intervals create more dynamic displays, while longer intervals are better for reading metadata.</p>
            </div>
            <div class="help-section">
                <h4>Background Refresh</h4>
                <p>How often the system fetches new content from your media server. Set to 0 to disable automatic refresh. Regular refreshing ensures new content appears in the rotation.</p>
            </div>
            <div class="help-section">
                <h4>Application Port</h4>
                <p>The network port for the admin interface. Default is 4000. Changing this requires an application restart. Make sure the port isn't used by other applications.</p>
            </div>
            <div class="help-section">
                <h4>Debug Mode</h4>
                <p>Enables detailed logging for troubleshooting. Check the live logs to see debug information. Only enable when investigating issues as it can impact performance.</p>
            </div>
        </div>
    </div>

    <!-- 2FA Setup Modal -->
    <div id="2fa-modal" class="modal is-hidden">
        <div class="modal-background"></div>
        <div class="modal-content">
            <h2 id="2fa-modal-title">Setup Two-Factor Authentication</h2>
            <p id="2fa-modal-intro">Follow these steps to secure your account with 2FA:</p>
            <ol style="margin: 1rem 0; padding-left: 1.5rem;">
                <li>Install an authenticator app (Google Authenticator, Authy, Microsoft Authenticator, etc.)</li>
                <li>Scan the QR code below with your authenticator app</li>
                <li>Enter the 6-digit code from your app to complete setup</li>
            </ol>
            <div id="qr-code-container" style="text-align: center; margin: 1.5rem 0;">
                <!-- QR code will be inserted here by JS -->
            </div>
            <form id="2fa-verify-form">
                <div class="form-group">
                    <label for="2fa-token">Enter verification code from your authenticator app</label>
                    <input type="text" id="2fa-token" name="2fa-token" required pattern="\d{6}" maxlength="6" autocomplete="one-time-code" inputmode="numeric" placeholder="000000" style="text-align: center; font-size: 1.2rem; letter-spacing: 0.2rem;">
                </div>
                <div class="form-actions">
                    <button type="button" id="cancel-2fa-button" class="btn btn-secondary">Cancel Setup</button>
                    <button type="submit" class="btn btn-primary">Complete Setup</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Disable 2FA Confirmation Modal -->
    <div id="disable-2fa-modal" class="modal is-hidden">
        <div class="modal-background"></div>
        <div class="modal-content">
            <h2>Disable Two-Factor Authentication</h2>
            <p><strong>⚠️ Warning:</strong> Disabling 2FA will make your account less secure.</p>
            <p>Please enter your current password to confirm this change:</p>
            <form id="disable-2fa-form">
                <div class="form-group">
                    <label for="disable-2fa-password">Current Password</label>
                    <input type="password" id="disable-2fa-password" name="password" required autocomplete="current-password">
                </div>
                <div class="form-actions">
                    <button type="button" id="cancel-disable-2fa-button" class="btn btn-secondary">Keep 2FA Enabled</button>
                    <button type="submit" class="btn btn-danger">Disable 2FA</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Auto-Update Confirmation Modal -->
    <div id="update-confirmation-modal" class="modal is-hidden">
        <div class="modal-background" onclick="closeUpdateConfirmationModal()"></div>
        <div class="modal-content">
            <span class="close" onclick="closeUpdateConfirmationModal()">&times;</span>
            <h3><i class="fas fa-download"></i> Confirm Automatic Update</h3>
            <div id="update-confirmation-content">
                <div style="text-align: center; padding: 2rem;">
                    <i class="fas fa-spinner fa-spin" style="font-size: 2rem; color: #667eea;"></i>
                    <p style="margin: 1rem 0 0 0; color: #ccc;">Loading update information...</p>
                </div>
            </div>
            <div class="form-actions" style="margin-top: 1.5rem;">
                <button type="button" id="confirm-update-button" class="btn btn-primary" onclick="confirmAutoUpdate()" disabled>
                    <i class="fas fa-download icon"></i>
                    <span>Start Update</span>
                </button>
                <button type="button" class="btn btn-secondary" onclick="closeUpdateConfirmationModal()">
                    <i class="fas fa-times icon"></i>
                    <span>Cancel</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Load admin JavaScript -->
    <script src="/admin.js?v=20250817b&cb=1755384925&mobilefinal=1" defer></script>
</body>
</html>