<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Admin Posterrama - Configure your media screensaver settings, manage Plex integration, and customize display options.">
    <meta name="author" content="Admin Posterrama">
    <meta name="robots" content="noindex, nofollow">
    <meta name="theme-color" content="#0a0a0a">
    <meta name="color-scheme" content="dark">
    <title>Admin Posterrama</title>
    
    <!-- Open Graph meta tags -->
    <meta property="og:title" content="Admin Posterrama">
    <meta property="og:description" content="Configure your media screensaver settings, manage Plex integration, and customize display options.">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Admin Posterrama">
    
    <!-- Twitter Card meta tags -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Admin Posterrama">
    <meta name="twitter:description" content="Configure your media screensaver settings and Plex integration.">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="/admin.html">
    
    <!-- DNS prefetch for external resources -->
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://fonts.gstatic.com">
    <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">
    
    <!-- Optimized font loading with font-display swap -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    
    <!-- Local CSS with versioning -->
    <link rel="stylesheet" href="/admin.css?v=20250815">
    
    <!-- Font Awesome with SRI for security -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer">
    
    <!-- Preload critical JavaScript -->
    <link rel="preload" href="/admin.js?v=20250815" as="script">
</head>
<body>
    <!-- Skip links for accessibility -->
    <div class="skip-links" aria-label="Skip navigation">
        <a href="#main-content" class="skip-link">Skip to main content</a>
        <a href="#sidebar" class="skip-link">Skip to navigation</a>
        <a href="#config-form" class="skip-link">Skip to settings</a>
    </div>
    
    <div class="admin-layout">
        <!-- Header -->
        <header class="admin-header" role="banner">
            <h1 class="logo-text"><span class="admin-text">Admin</span> <span class="gradient-text">posterrama</span></h1>
            <nav role="navigation" aria-label="Main navigation" class="header-nav">
                <!-- Restart Now button - only shown when restart is needed -->
                <button type="button" id="restart-now-btn" class="btn btn-warning" style="display: none;">
                    <i class="fas fa-sync-alt" aria-hidden="true"></i>
                    Restart Now
                </button>
                <button type="button" id="toggle-help-panel" class="btn btn-secondary">
                    <i class="fas fa-question-circle" aria-hidden="true"></i>
                    Help
                </button>
                <a href="/" target="_blank" aria-label="View screensaver in new tab" class="btn btn-secondary" id="view-screensaver-btn">
                    <i class="fas fa-external-link-alt" aria-hidden="true"></i>
                    View Screensaver
                </a>
                <a href="/api-docs" target="_blank" aria-label="View API documentation in new tab" class="btn btn-secondary" id="api-docs-btn">
                    <i class="fas fa-book" aria-hidden="true"></i>
                    API Docs
                </a>
                <a href="/admin/logout" aria-label="Logout from admin panel" class="btn btn-danger" id="logout-btn">
                    <i class="fas fa-sign-out-alt" aria-hidden="true"></i>
                    Logout
                </a>
            </nav>
        </header>

        <!-- Sidebar Navigation -->
        <nav class="sidebar" id="sidebar" role="navigation" aria-label="Settings sections">
            <div class="sidebar-header">
                <button class="sidebar-toggle btn btn-secondary" id="sidebar-toggle" aria-label="Toggle sidebar navigation" aria-expanded="true" aria-controls="sidebar">
                    <i class="fas fa-bars nav-icon" aria-hidden="true"></i>
                </button>
                <div class="sidebar-logo">
                    <span class="logo-text"></span>
                </div>
            </div>
            
            <div class="sidebar-nav" role="tablist" aria-orientation="vertical">
                <button class="nav-item active" data-section="general" title="General Settings" role="tab" aria-selected="true" aria-controls="general-section" id="general-tab">
                    <i class="fas fa-cog nav-icon" aria-hidden="true"></i>
                    <span class="nav-text">General</span>
                </button>
                
                <button class="nav-item" data-section="display" title="Display Settings" role="tab" aria-selected="false" aria-controls="display-section" id="display-tab">
                    <i class="fas fa-tv nav-icon" aria-hidden="true"></i>
                    <span class="nav-text">Display</span>
                </button>
                
                                <button class="nav-item" data-section="media" title="Sources" role="tab" aria-selected="false" aria-controls="media-section" id="media-tab">
                    <i class="fas fa-database nav-icon" aria-hidden="true"></i>
                    <span class="nav-text">Sources</span>
                </button>
                
                <button class="nav-item" data-section="authentication" title="Authentication" role="tab" aria-selected="false" aria-controls="authentication-section" id="authentication-tab">
                    <i class="fas fa-shield-alt nav-icon" aria-hidden="true"></i>
                    <span class="nav-text">Auth</span>
                </button>
                
                <button class="nav-item" data-section="promobox" title="Promobox Site" role="tab" aria-selected="false" aria-controls="promobox-section" id="promobox-tab">
                    <i class="fas fa-globe nav-icon" aria-hidden="true"></i>
                    <span class="nav-text">Promo</span>
                </button>
                
                <button class="nav-item" data-section="management" title="Management" role="tab" aria-selected="false" aria-controls="management-section" id="management-tab">
                    <i class="fas fa-tools nav-icon" aria-hidden="true"></i>
                    <span class="nav-text">Manage</span>
                </button>
                
                <button class="nav-item" data-section="logs" title="Logs & Debug" role="tab" aria-selected="false" aria-controls="logs-section" id="logs-tab">
                    <i class="fas fa-file-alt nav-icon" aria-hidden="true"></i>
                    <span class="nav-text">Logs</span>
                </button>
            </div>
        </nav>

        <!-- Sidebar overlay for mobile -->
        <div class="sidebar-overlay" id="sidebar-overlay" aria-hidden="true"></div>

        <!-- Main Content Area -->
        <div class="main-content">
            <div id="admin-background-a" class="admin-background-layer" aria-hidden="true"></div>
            <div id="admin-background-b" class="admin-background-layer" aria-hidden="true"></div>
            <div class="admin-background-overlay" aria-hidden="true"></div>

            <main class="admin-main" role="main" id="main-content" tabindex="-1" aria-label="Admin dashboard settings">
                <div id="notification-area" class="notification-container" role="region" aria-label="Status notifications" aria-live="polite" aria-atomic="true"></div>

                <form id="config-form" role="form" aria-label="Configuration settings" novalidate>
                    <!-- General Settings Section -->
                    <section class="section-content active" id="general-section" role="tabpanel" aria-labelledby="general-tab" tabindex="0">
                        <div class="section-main-content">
                            <div class="section-title">
                                <i class="fas fa-cog" aria-hidden="true"></i>
                                General Settings
                            </div>
                            
                            <!-- Unified General Settings Container -->
                            <div class="form-section unified-section">
                                
                                <!-- Application Settings Subsection -->
                                <div class="subsection-header">
                                    <i class="fas fa-cogs"></i>
                                    Application Settings
                                </div>
                                <div class="subsection-content">
                                    <div class="form-group">
                                        <label for="transitionIntervalSeconds" title="How many seconds each poster is visible.">Transition Interval (seconds)</label>
                                        <div class="number-input-wrapper">
                                            <input type="number" id="transitionIntervalSeconds" name="transitionIntervalSeconds" min="1" max="300" step="1" required aria-describedby="transitionIntervalSeconds-help">
                                            <div class="number-controls" role="group" aria-label="Adjust transition interval">
                                                <button type="button" class="number-btn" id="increment-transitionIntervalSeconds" aria-label="Increase transition interval">
                                                    <i class="fas fa-chevron-up" aria-hidden="true"></i>
                                                </button>
                                                <button type="button" class="number-btn" id="decrement-transitionIntervalSeconds" aria-label="Decrease transition interval">
                                                    <i class="fas fa-chevron-down" aria-hidden="true"></i>
                                                </button>
                                            </div>
                                        </div>
                                        <div id="transitionIntervalSeconds-help" class="form-help">Time in seconds between poster transitions (1-300)</div>
                                    </div>
                                    <div class="form-group">
                                        <label for="backgroundRefreshMinutes">Background Refresh</label>
                                        <div class="number-input-wrapper">
                                            <input type="number" id="backgroundRefreshMinutes" name="backgroundRefreshMinutes" min="0" max="1440" step="1" aria-describedby="backgroundRefreshMinutes-help">
                                            <div class="number-controls" role="group" aria-label="Adjust background refresh interval">
                                                <button type="button" class="number-btn" id="increment-backgroundRefreshMinutes" aria-label="Increase refresh interval">
                                                    <i class="fas fa-chevron-up" aria-hidden="true"></i>
                                                </button>
                                                <button type="button" class="number-btn" id="decrement-backgroundRefreshMinutes" aria-label="Decrease refresh interval">
                                                    <i class="fas fa-chevron-down" aria-hidden="true"></i>
                                                </button>
                                            </div>
                                        </div>
                                        <div id="backgroundRefreshMinutes-help" class="form-help">How often to refresh background images (0 to disable, max 1440 minutes)</div>
                                    </div>
                                </div>
                                
                                <!-- Server Configuration Subsection -->
                                <div class="subsection-header">
                                    <i class="fas fa-server"></i>
                                    Server Configuration
                                </div>
                                <div class="subsection-content">
                                    <div class="form-group">
                                        <label for="SERVER_PORT">Application Port</label>
                                        <div class="number-input-wrapper">
                                            <input type="number" id="SERVER_PORT" name="SERVER_PORT" min="1024" max="65535" step="1" required aria-describedby="serverPort-help">
                                            <div class="number-controls" role="group" aria-label="Adjust server port">
                                                <button type="button" class="number-btn" id="increment-serverPort" aria-label="Increase port number">
                                                    <i class="fas fa-chevron-up" aria-hidden="true"></i>
                                                </button>
                                                <button type="button" class="number-btn" id="decrement-serverPort" aria-label="Decrease port number">
                                                    <i class="fas fa-chevron-down" aria-hidden="true"></i>
                                                </button>
                                            </div>
                                        </div>
                                        <div id="serverPort-help" class="form-help">Port number for the application server (1024-65535)</div>
                                    </div>
                                </div>
                                
                                <!-- Development & Debug Subsection -->
                                <div class="subsection-header">
                                    <i class="fas fa-bug"></i>
                                    Development & Debug
                                </div>
                                <div class="subsection-content">
                                    <div class="form-group checkbox-group">
                                        <input type="checkbox" id="DEBUG" name="DEBUG" aria-describedby="DEBUG-help">
                                        <label for="DEBUG">Enable Debug Mode</label>
                                    </div>
                                    <div id="DEBUG-help" class="form-help">Enable detailed logging for troubleshooting</div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Display Settings Section -->
                    <section class="section-content" id="display-section" role="tabpanel" aria-labelledby="display-tab">
                        <div class="section-main-content">
                            <div class="section-title">
                                <i class="fas fa-tv" aria-hidden="true"></i>
                                Display Settings
                            </div>
                            
                            <!-- Unified Display Settings Container -->
                            <div class="form-section unified-section">
                                
                                <!-- Cinema Mode Subsection -->
                                <div class="subsection-header">
                                    <i class="fas fa-film"></i>
                                    Cinema Mode
                                </div>
                                <div class="subsection-content">
                                    <div class="form-group checkbox-group">
                                        <input type="checkbox" id="cinemaMode" name="cinemaMode">
                                        <label for="cinemaMode">Enable Cinema Mode (Digital Movie Poster)</label>
                                    </div>
                                    <div class="form-group cinema-orientation-group hidden" id="cinemaOrientationGroup">
                                        <label for="cinemaOrientation">Cinema Display Orientation</label>
                                        <select id="cinemaOrientation" name="cinemaOrientation">
                                            <option value="auto">Auto (use device sensor)</option>
                                            <option value="portrait">Portrait</option>
                                            <option value="portrait-flipped">Portrait Flipped (180¬∞)</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <!-- Visual Elements Subsection -->
                                <div class="subsection-header">
                                    <i class="fas fa-eye"></i>
                                    Visual Elements
                                </div>
                                <div class="subsection-content">
                                    <div class="form-grid-2">
                                        <div class="form-group checkbox-group">
                                            <input type="checkbox" id="showClearLogo" name="showClearLogo">
                                            <label for="showClearLogo">Show ClearLogo</label>
                                        </div>
                                        <div class="form-group checkbox-group">
                                            <input type="checkbox" id="showRottenTomatoes" name="showRottenTomatoes">
                                            <label for="showRottenTomatoes">Show Rotten Tomatoes Badge</label>
                                        </div>
                                        <div class="form-group checkbox-group">
                                            <input type="checkbox" id="showPoster" name="showPoster">
                                            <label for="showPoster">Show Poster</label>
                                        </div>
                                        <div class="form-group checkbox-group">
                                            <input type="checkbox" id="showMetadata" name="showMetadata">
                                            <label for="showMetadata">Show Metadata</label>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="rottenTomatoesMinimumScore">Minimum Rotten Tomatoes Score (0-10)</label>
                                        <input type="number" id="rottenTomatoesMinimumScore" name="rottenTomatoesMinimumScore" min="0" max="10" step="0.1">
                                    </div>
                                </div>
                                
                                <!-- Clock Widget Subsection -->
                                <div class="subsection-header">
                                    <i class="fas fa-clock"></i>
                                    Clock Widget
                                </div>
                                <div class="subsection-content">
                                    <div class="form-group checkbox-group">
                                        <input type="checkbox" id="clockWidget" name="clockWidget">
                                        <label for="clockWidget">Show Clock</label>
                                    </div>
                                    <div class="form-group clock-timezone-group hidden" id="clockTimezoneGroup">
                                        <label for="clockTimezone">Clock Timezone</label>
                                        <select id="clockTimezone" name="clockTimezone">
                                            <option value="auto">Auto (System Timezone)</option>
                                            <optgroup label="Common Timezones">
                                                <option value="Europe/Amsterdam">Europe/Amsterdam (CET/CEST)</option>
                                                <option value="Europe/London">Europe/London (GMT/BST)</option>
                                                <option value="Europe/Berlin">Europe/Berlin (CET/CEST)</option>
                                                <option value="Europe/Paris">Europe/Paris (CET/CEST)</option>
                                                <option value="America/New_York">America/New_York (EST/EDT)</option>
                                                <option value="America/Chicago">America/Chicago (CST/CDT)</option>
                                                <option value="America/Denver">America/Denver (MST/MDT)</option>
                                                <option value="America/Los_Angeles">America/Los_Angeles (PST/PDT)</option>
                                                <option value="Asia/Tokyo">Asia/Tokyo (JST)</option>
                                                <option value="Asia/Shanghai">Asia/Shanghai (CST)</option>
                                                <option value="Australia/Sydney">Australia/Sydney (AEST/AEDT)</option>
                                            </optgroup>
                                            <optgroup label="Additional Timezones">
                                                <option value="UTC">UTC (Coordinated Universal Time)</option>
                                                <option value="Africa/Cairo">Africa/Cairo (EET)</option>
                                                <option value="Africa/Johannesburg">Africa/Johannesburg (SAST)</option>
                                                <option value="America/Argentina/Buenos_Aires">America/Argentina/Buenos_Aires (ART)</option>
                                                <option value="America/Mexico_City">America/Mexico_City (CST/CDT)</option>
                                                <option value="America/Sao_Paulo">America/Sao_Paulo (BRT/BRST)</option>
                                                <option value="America/Toronto">America/Toronto (EST/EDT)</option>
                                                <option value="America/Vancouver">America/Vancouver (PST/PDT)</option>
                                                <option value="Asia/Bangkok">Asia/Bangkok (ICT)</option>
                                                <option value="Asia/Dubai">Asia/Dubai (GST)</option>
                                                <option value="Asia/Hong_Kong">Asia/Hong_Kong (HKT)</option>
                                                <option value="Asia/Jakarta">Asia/Jakarta (WIB)</option>
                                                <option value="Asia/Kolkata">Asia/Kolkata (IST)</option>
                                                <option value="Asia/Seoul">Asia/Seoul (KST)</option>
                                                <option value="Asia/Singapore">Asia/Singapore (SGT)</option>
                                                <option value="Asia/Taipei">Asia/Taipei (CST)</option>
                                                <option value="Australia/Brisbane">Australia/Brisbane (AEST)</option>
                                                <option value="Australia/Melbourne">Australia/Melbourne (AEST/AEDT)</option>
                                                <option value="Australia/Perth">Australia/Perth (AWST)</option>
                                                <option value="Europe/Athens">Europe/Athens (EET/EEST)</option>
                                                <option value="Europe/Istanbul">Europe/Istanbul (TRT)</option>
                                                <option value="Europe/Moscow">Europe/Moscow (MSK)</option>
                                                <option value="Europe/Rome">Europe/Rome (CET/CEST)</option>
                                                <option value="Europe/Stockholm">Europe/Stockholm (CET/CEST)</option>
                                                <option value="Europe/Zurich">Europe/Zurich (CET/CEST)</option>
                                                <option value="Pacific/Auckland">Pacific/Auckland (NZST/NZDT)</option>
                                                <option value="Pacific/Honolulu">Pacific/Honolulu (HST)</option>
                                            </optgroup>
                                        </select>
                                    </div>
                                    <div class="form-group clock-format-group hidden" id="clockFormatGroup">
                                        <label for="clockFormat">Clock Format</label>
                                        <select id="clockFormat" name="clockFormat">
                                            <option value="24h">24-hour format (23:45)</option>
                                            <option value="12h">12-hour format (11:45 PM)</option>
                                        </select>
                                    </div>
                                </div>
                        
                        <!-- UI Element Scaling Subsection -->
                        <div class="subsection-header">
                            <i class="fas fa-expand-arrows-alt"></i>
                            UI Element Scaling
                        </div>
                        <div class="subsection-content">
                            <!-- Scaling Templates -->
                            <div class="scaling-templates">
                                <label>Quick Templates:</label>
                                <div class="template-buttons" role="group" aria-label="UI scaling templates">
                                    <button type="button" class="btn btn-secondary" id="apply-fullhd-template" aria-label="Apply Full HD scaling template">Full HD</button>
                                    <button type="button" class="btn btn-secondary" id="apply-4k-template" aria-label="Apply 4K scaling template">4K</button>
                                    <button type="button" class="btn btn-secondary" id="apply-widescreen-template" aria-label="Apply widescreen scaling template">Widescreen</button>
                                    <button type="button" class="btn btn-secondary" id="reset-scaling-defaults" aria-label="Reset scaling to default values">Reset</button>
                                </div>
                            </div>
                            
                            <!-- Compact Scaling Grid -->
                            <div class="scaling-grid">
                                <div class="scaling-item">
                                    <label for="uiScaling.poster">Poster</label>
                                    <div class="slider-container">
                                        <input type="range" id="uiScaling.poster" name="uiScaling.poster" min="50" max="200" value="100" step="5">
                                        <div class="slider-track"></div>
                                        <div class="slider-fill"></div>
                                        <div class="slider-thumb"></div>
                                        <span class="slider-value" data-target="uiScaling.poster">100%</span>
                                    </div>
                                </div>
                                <div class="scaling-item">
                                    <label for="uiScaling.text">Text</label>
                                    <div class="slider-container">
                                        <input type="range" id="uiScaling.text" name="uiScaling.text" min="50" max="200" value="100" step="5">
                                        <div class="slider-track"></div>
                                        <div class="slider-fill"></div>
                                        <div class="slider-thumb"></div>
                                        <span class="slider-value" data-target="uiScaling.text">100%</span>
                                    </div>
                                </div>
                                <div class="scaling-item">
                                    <label for="uiScaling.clearlogo">Clearlogo</label>
                                    <div class="slider-container">
                                        <input type="range" id="uiScaling.clearlogo" name="uiScaling.clearlogo" min="50" max="200" value="100" step="5">
                                        <div class="slider-track"></div>
                                        <div class="slider-fill"></div>
                                        <div class="slider-thumb"></div>
                                        <span class="slider-value" data-target="uiScaling.clearlogo">100%</span>
                                    </div>
                                </div>
                                <div class="scaling-item">
                                    <label for="uiScaling.clock">Clock</label>
                                    <div class="slider-container">
                                        <input type="range" id="uiScaling.clock" name="uiScaling.clock" min="50" max="200" value="100" step="5">
                                        <div class="slider-track"></div>
                                        <div class="slider-fill"></div>
                                        <div class="slider-thumb"></div>
                                        <span class="slider-value" data-target="uiScaling.clock">100%</span>
                                    </div>
                                </div>
                                <div class="scaling-item">
                                    <label for="uiScaling.global">Global</label>
                                    <div class="slider-container">
                                        <input type="range" id="uiScaling.global" name="uiScaling.global" min="50" max="200" value="100" step="5">
                                        <div class="slider-track"></div>
                                        <div class="slider-fill"></div>
                                        <div class="slider-thumb"></div>
                                        <span class="slider-value" data-target="uiScaling.global">100%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                            
                            <!-- Effects & Transitions Subsection -->
                            <div class="subsection-header">
                                <i class="fas fa-magic"></i>
                                Effects & Transitions
                            </div>
                            <div class="subsection-content">
                                <div class="form-group">
                                    <label for="transitionEffect">Transition Effect</label>
                                    <select id="transitionEffect" name="transitionEffect">
                                        <option value="kenburns">Ken Burns</option>
                                        <option value="fade">Fade In/Out</option>
                                        <option value="slide">Slide Transition</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="effectPauseTime">Effect Pause Time (seconds)</label>
                                    <input type="number" id="effectPauseTime" name="effectPauseTime" min="0" max="10" step="0.5" value="2">
                                </div>
                            </div>
                        </div>
                        </div>
                    </section>

                    <!-- Sources Section -->
                    <section class="section-content" id="media-section" role="tabpanel" aria-labelledby="media-tab">
                        <div class="section-main-content">
                            <div class="section-title">
                                <i class="fas fa-database"></i>
                                Content Sources
                            </div>
                            
                            <!-- Quick Navigation Links -->
            <div class="quick-nav-links">
                <div class="quick-nav-item">
                    <a href="#" class="quick-nav-link" onclick="scrollToSubsection('plex-subsection'); return false;" title="Plex Configuration">
                        <i class="fas fa-server"></i>
                    </a>
                    <span class="quick-nav-label">Plex</span>
                </div>
                <div class="quick-nav-item">
                    <a href="#" class="quick-nav-link" onclick="scrollToSubsection('tmdb-subsection'); return false;" title="TMDB Configuration">
                        <i class="fas fa-film"></i>
                    </a>
                    <span class="quick-nav-label">TMDB</span>
                </div>
                <div class="quick-nav-item">
                    <a href="#" class="quick-nav-link" onclick="scrollToSubsection('tvdb-subsection'); return false;" title="TVDB Configuration">
                        <i class="fas fa-tv"></i>
                    </a>
                    <span class="quick-nav-label">TVDB</span>
                </div>
            </div>                            <!-- Unified Sources Container -->
                            <div class="form-section unified-section">
                                
                                <!-- Plex Media Server Subsection -->
                                <div class="subsection-header" id="plex-subsection">
                                    <i class="fas fa-server"></i>
                                    Plex Media Server
                                </div>
                                <div class="subsection-content">
                                    <div class="form-group checkbox-group">
                                        <input type="checkbox" id="mediaServers[0].enabled" name="mediaServers[0].enabled">
                                        <label for="mediaServers[0].enabled">Enable Plex Server as Content Source</label>
                                    </div>
                                    <div class="form-group">
                                        <label for="mediaServers[0].hostname">Plex Hostname/IP</label>
                                        <input type="text" id="mediaServers[0].hostname" name="mediaServers[0].hostname" placeholder="192.168.1.10 or plex.local" pattern="^[a-zA-Z0-9\.\-]+$">
                                    </div>
                                    <div class="form-group">
                                        <label for="mediaServers[0].port">Plex Port</label>
                                        <input type="number" id="mediaServers[0].port" name="mediaServers[0].port" min="1" max="65535" placeholder="32400">
                                    </div>
                                    <div class="form-group">
                                        <label for="mediaServers[0].token">Plex Token</label>
                                        <input type="password" id="mediaServers[0].token" name="mediaServers[0].token">
                                    </div>
                                </div>
                                
                                <!-- Library Configuration Subsection -->
                                <div class="subsection-header">
                                    <i class="fas fa-folder-open"></i>
                                    Library Configuration
                                </div>
                                <div class="subsection-content">
                                    <div class="form-group">
                                        <label>Movie Library Names</label>
                                        <div id="movie-libraries-container" class="library-container">
                                            <small>Test the connection to fetch the libraries.</small>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label>Show Library Names</label>
                                        <div id="show-libraries-container" class="library-container">
                                            <small>Test the connection to fetch the libraries.</small>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="mediaServers[0].movieCount">Number of Movies to Show</label>
                                        <input type="number" id="mediaServers[0].movieCount" name="mediaServers[0].movieCount" min="1" max="10000" placeholder="100">
                                    </div>
                                    <div class="form-group">
                                        <label for="mediaServers[0].showCount">Number of Shows to Show</label>
                                        <input type="number" id="mediaServers[0].showCount" name="mediaServers[0].showCount" min="1" max="10000" placeholder="50">
                                    </div>
                                </div>
                                
                                <!-- Content Filtering Subsection -->
                                <div class="subsection-header" id="content-filtering-subsection">
                                    <i class="fas fa-filter"></i>
                                    Content Filtering
                                </div>
                                <div class="subsection-content">
                                    <div class="form-group">
                                        <label for="mediaServers[0].ratingFilter">Rating Filter</label>
                                        <select id="mediaServers[0].ratingFilter" name="mediaServers[0].ratingFilter">
                                            <option value="">All Ratings</option>
                                            <option value="G">G - General Audiences</option>
                                            <option value="PG">PG - Parental Guidance</option>
                                            <option value="PG-13">PG-13 - Parents Strongly Cautioned</option>
                                            <option value="R">R - Restricted</option>
                                            <option value="NC-17">NC-17 - Adults Only</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="mediaServers[0].genreFilter">Genre Filter</label>
                                        <div class="genre-filter-container">
                                            <select id="mediaServers[0].genreFilter" name="mediaServers[0].genreFilter" multiple class="genre-filter-select">
                                                <option value="">Loading genres...</option>
                                            </select>
                                            <button type="button" class="btn-clear-genres" id="clearGenresBtn" title="Clear all selected genres">
                                                <i class="fas fa-times"></i> Clear Selection
                                            </button>
                                        </div>
                                        <small class="genre-filter-help">üí° Tip: Hold Ctrl (Windows) or Cmd (Mac) while clicking to select multiple genres. Click "Clear Selection" to show all content.</small>
                                    </div>
                                    <div class="form-group checkbox-group">
                                        <input type="checkbox" id="mediaServers[0].recentlyAddedOnly" name="mediaServers[0].recentlyAddedOnly">
                                        <label for="mediaServers[0].recentlyAddedOnly">Show Only Recently Added Content</label>
                                    </div>
                                    <div class="form-group recently-added-days-group hidden" id="recentlyAddedDaysContainer">
                                        <label for="mediaServers[0].recentlyAddedDays">Recently Added (days)</label>
                                        <input type="number" id="mediaServers[0].recentlyAddedDays" name="mediaServers[0].recentlyAddedDays" min="1" max="365" placeholder="30" value="30">
                                    </div>
                                    <div class="form-group">
                                        <label for="mediaServers[0].qualityFilter">Quality Filter</label>
                                        <select id="mediaServers[0].qualityFilter" name="mediaServers[0].qualityFilter">
                                            <option value="">All Qualities</option>
                                            <option value="SD">SD - Standard Definition</option>
                                            <option value="720p">720p - HD Ready</option>
                                            <option value="1080p">1080p - Full HD</option>
                                            <option value="4K">4K - Ultra HD</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <!-- Connection Testing Subsection -->
                                <div class="subsection-header">
                                    <i class="fas fa-plug"></i>
                                    Connection Testing
                                </div>
                                <div class="subsection-content">
                                    <div class="form-group">
                                        <button type="button" id="test-plex-button" class="btn btn-primary">
                                            <i class="fas fa-plug icon"></i>
                                            <span>Test Plex Connection</span>
                                        </button>
                                        <small id="plex-connection-status"></small>
                                    </div>
                                </div>
                                
                                <!-- TMDB External Source Subsection -->
                                <div class="subsection-header" id="tmdb-subsection">
                                    <i class="fas fa-film"></i>
                                    TMDB External Source
                                </div>
                                <div class="subsection-content">
                                    <div class="form-group checkbox-group">
                                        <input type="checkbox" id="tmdbSource.enabled" name="tmdbSource.enabled">
                                        <label for="tmdbSource.enabled">Enable TMDB as Content Source</label>
                                    </div>
                                    <div class="form-group">
                                        <label for="tmdbSource.apiKey">TMDB API Key</label>
                                        <input type="password" id="tmdbSource.apiKey" name="tmdbSource.apiKey" placeholder="Your TMDB API v3 key">
                                        <small>Get a free API key from <a href="https://www.themoviedb.org/settings/api" target="_blank" rel="noopener">TMDB API Settings</a></small>
                                    </div>
                                    <div class="form-group">
                                        <label for="tmdbSource.category">Content Category</label>
                                        <select id="tmdbSource.category" name="tmdbSource.category">
                                            <optgroup label="üé¨ Movies">
                                                <option value="popular">üî• Popular Movies</option>
                                                <option value="top_rated">‚≠ê Top Rated Movies</option>
                                                <option value="now_playing">üé≠ Now Playing</option>
                                                <option value="upcoming">üìÖ Upcoming Movies</option>
                                                <option value="latest">üÜï Latest Movies</option>
                                            </optgroup>
                                            <optgroup label="üì∫ TV Shows">
                                                <option value="tv_popular">üî• Popular TV Shows</option>
                                                <option value="tv_top_rated">‚≠ê Top Rated TV Shows</option>
                                                <option value="tv_on_the_air">üì° Currently Airing</option>
                                                <option value="tv_airing_today">üì∫ Airing Today</option>
                                                <option value="tv_latest">üÜï Latest TV Shows</option>
                                            </optgroup>
                                            <optgroup label="üéØ Trending">
                                                <option value="trending_all_day">üìà Trending Today (All)</option>
                                                <option value="trending_movie_day">üé¨ Trending Movies (Day)</option>
                                                <option value="trending_tv_day">üì∫ Trending TV (Day)</option>
                                                <option value="trending_all_week">üìä Trending Week (All)</option>
                                                <option value="trending_movie_week">üé¨ Trending Movies (Week)</option>
                                                <option value="trending_tv_week">üì∫ Trending TV (Week)</option>
                                            </optgroup>
                                            <optgroup label="üèÜ Collections">
                                                <option value="discover_movie">üîç Discover Movies</option>
                                                <option value="discover_tv">üîç Discover TV Shows</option>
                                            </optgroup>
                                        </select>
                                        <small class="help-text">üéØ Choose the type of content to fetch from TMDB. Trending shows what's hot right now!</small>
                                    </div>
                                    <div class="form-group">
                                        <label for="tmdbSource.movieCount">Number of Movies to Show</label>
                                        <input type="number" id="tmdbSource.movieCount" name="tmdbSource.movieCount" min="0" max="1000" placeholder="50">
                                    </div>
                                    <div class="form-group">
                                        <label for="tmdbSource.showCount">Number of TV Shows to Show</label>
                                        <input type="number" id="tmdbSource.showCount" name="tmdbSource.showCount" min="0" max="1000" placeholder="25">
                                    </div>
                                    <div class="form-group">
                                        <label for="tmdbSource.minRating">Minimum Rating (0-10)</label>
                                        <input type="number" id="tmdbSource.minRating" name="tmdbSource.minRating" min="0" max="10" step="0.1" placeholder="6.0">
                                    </div>
                                    <div class="form-group">
                                        <label for="tmdbSource.yearFilter">From Year</label>
                                        <input type="number" id="tmdbSource.yearFilter" name="tmdbSource.yearFilter" min="1900" max="2030" placeholder="2000">
                                    </div>
                                    <div class="form-group">
                                        <label for="tmdbSource.genreFilter">Genre Filter</label>
                                        <div class="genre-filter-container">
                                            <select id="tmdbSource.genreFilter" name="tmdbSource.genreFilter" multiple class="genre-filter-select">
                                                <option value="">Loading genres...</option>
                                            </select>
                                            <button type="button" class="btn-clear-genres" id="clearTmdbGenresBtn" title="Clear all selected genres">
                                                <i class="fas fa-times"></i> Clear Selection
                                            </button>
                                        </div>
                                        <small class="genre-filter-help">üí° Tip: Hold Ctrl (Windows) or Cmd (Mac) while clicking to select multiple genres. Click "Clear Selection" to show all content.</small>
                                    </div>
                                    <div class="form-group">
                                        <button type="button" id="test-tmdb-button" class="btn btn-primary">
                                            <i class="fas fa-plug icon"></i>
                                            <span>Test TMDB Connection</span>
                                        </button>
                                        <small id="tmdb-connection-status"></small>
                                    </div>
                                </div>
                                
                                <!-- Streaming Releases Subsection -->
                                <div class="external-source-subsection" data-source="streaming">
                                    <h4><i class="fas fa-stream"></i> Streaming Releases</h4>
                                    <p class="external-source-description">Add latest releases from popular streaming platforms using TMDB's streaming provider data.</p>
                                    
                                    <div class="form-group">
                                        <label class="checkbox-label">
                                            <input type="checkbox" id="streamingSources.enabled" name="streamingSources.enabled">
                                            Enable Streaming Releases
                                        </label>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="streamingSources.region">Region</label>
                                        <select id="streamingSources.region" name="streamingSources.region">
                                            <option value="US">üá∫üá∏ United States</option>
                                            <option value="NL">üá≥üá± Netherlands</option>
                                            <option value="GB">üá¨üáß United Kingdom</option>
                                            <option value="DE">üá©üá™ Germany</option>
                                            <option value="FR">üá´üá∑ France</option>
                                            <option value="CA">üá®üá¶ Canada</option>
                                            <option value="AU">üá¶üá∫ Australia</option>
                                            <option value="ES">üá™üá∏ Spain</option>
                                            <option value="IT">üáÆüáπ Italy</option>
                                            <option value="BR">üáßüá∑ Brazil</option>
                                            <option value="MX">üá≤üáΩ Mexico</option>
                                            <option value="AR">üá¶üá∑ Argentina</option>
                                            <option value="JP">üáØüáµ Japan</option>
                                            <option value="KR">üá∞üá∑ South Korea</option>
                                            <option value="IN">üáÆüá≥ India</option>
                                            <option value="CN">üá®üá≥ China</option>
                                            <option value="RU">üá∑üá∫ Russia</option>
                                            <option value="BE">üáßüá™ Belgium</option>
                                            <option value="AT">üá¶üáπ Austria</option>
                                            <option value="CH">üá®üá≠ Switzerland</option>
                                            <option value="SE">üá∏üá™ Sweden</option>
                                            <option value="NO">üá≥üá¥ Norway</option>
                                            <option value="DK">üá©üá∞ Denmark</option>
                                            <option value="FI">üá´üáÆ Finland</option>
                                            <option value="PL">üáµüá± Poland</option>
                                            <option value="CZ">üá®üáø Czech Republic</option>
                                            <option value="HU">üá≠üá∫ Hungary</option>
                                            <option value="PT">üáµüáπ Portugal</option>
                                            <option value="GR">üá¨üá∑ Greece</option>
                                            <option value="TR">üáπüá∑ Turkey</option>
                                            <option value="IL">üáÆüá± Israel</option>
                                            <option value="ZA">üáøüá¶ South Africa</option>
                                            <option value="EG">üá™üá¨ Egypt</option>
                                            <option value="SA">üá∏üá¶ Saudi Arabia</option>
                                            <option value="AE">üá¶üá™ United Arab Emirates</option>
                                            <option value="TH">üáπüá≠ Thailand</option>
                                            <option value="SG">üá∏üá¨ Singapore</option>
                                            <option value="MY">üá≤üáæ Malaysia</option>
                                            <option value="ID">üáÆüá© Indonesia</option>
                                            <option value="PH">üáµüá≠ Philippines</option>
                                            <option value="VN">üáªüá≥ Vietnam</option>
                                            <option value="TW">üáπüáº Taiwan</option>
                                            <option value="HK">üá≠üá∞ Hong Kong</option>
                                            <option value="NZ">üá≥üáø New Zealand</option>
                                            <option value="CL">üá®üá± Chile</option>
                                            <option value="CO">üá®üá¥ Colombia</option>
                                            <option value="PE">üáµüá™ Peru</option>
                                            <option value="VE">üáªüá™ Venezuela</option>
                                            <option value="UY">üá∫üáæ Uruguay</option>
                                            <option value="EC">üá™üá® Ecuador</option>
                                            <option value="BO">üáßüá¥ Bolivia</option>
                                            <option value="PY">üáµüáæ Paraguay</option>
                                        </select>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label>Streaming Providers</label>
                                        <div class="streaming-providers-grid">
                                            <label class="checkbox-label streaming-provider">
                                                <input type="checkbox" id="streamingSources.netflix" name="streamingSources.netflix" value="8">
                                                <i class="fas fa-film"></i>
                                                <span>Netflix</span>
                                            </label>
                                            <label class="checkbox-label streaming-provider">
                                                <input type="checkbox" id="streamingSources.disney" name="streamingSources.disney" value="337">
                                                <i class="fas fa-magic"></i>
                                                <span>Disney+</span>
                                            </label>
                                            <label class="checkbox-label streaming-provider">
                                                <input type="checkbox" id="streamingSources.prime" name="streamingSources.prime" value="119">
                                                <i class="fab fa-amazon"></i>
                                                <span>Prime Video</span>
                                            </label>
                                            <label class="checkbox-label streaming-provider">
                                                <input type="checkbox" id="streamingSources.hbo" name="streamingSources.hbo" value="1899">
                                                <i class="fas fa-play-circle"></i>
                                                <span>Max (HBO)</span>
                                            </label>
                                            <label class="checkbox-label streaming-provider">
                                                <input type="checkbox" id="streamingSources.hulu" name="streamingSources.hulu" value="15">
                                                <i class="fas fa-tv"></i>
                                                <span>Hulu</span>
                                            </label>
                                            <label class="checkbox-label streaming-provider">
                                                <input type="checkbox" id="streamingSources.apple" name="streamingSources.apple" value="350">
                                                <i class="fab fa-apple"></i>
                                                <span>Apple TV+</span>
                                            </label>
                                            <label class="checkbox-label streaming-provider">
                                                <input type="checkbox" id="streamingSources.paramount" name="streamingSources.paramount" value="531">
                                                <i class="fas fa-mountain"></i>
                                                <span>Paramount+</span>
                                            </label>
                                            <label class="checkbox-label streaming-provider">
                                                <input type="checkbox" id="streamingSources.crunchyroll" name="streamingSources.crunchyroll" value="283">
                                                <i class="fas fa-dragon"></i>
                                                <span>Crunchyroll</span>
                                            </label>
                                            <label class="checkbox-label streaming-provider">
                                                <input type="checkbox" id="streamingSources.newReleases" name="streamingSources.newReleases" value="new">
                                                <i class="fas fa-star"></i>
                                                <span>New Releases (All)</span>
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="streamingSources.maxItems">Maximum Items per Provider</label>
                                        <input type="number" id="streamingSources.maxItems" name="streamingSources.maxItems" min="5" max="100" value="10">
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="streamingSources.minRating">Minimum Rating (0-10)</label>
                                        <input type="number" id="streamingSources.minRating" name="streamingSources.minRating" min="0" max="10" step="0.1" placeholder="6.0">
                                    </div>
                                    
                                    <div class="form-group">
                                        <button type="button" id="test-streaming-button" class="btn btn-primary">
                                            <i class="fas fa-stream icon"></i>
                                            <span>Test Streaming Connection</span>
                                        </button>
                                        <small id="streaming-connection-status"></small>
                                    </div>
                                </div>
                                
                                <!-- TVDB External Source Subsection -->
                                <div class="subsection-header" id="tvdb-subsection">
                                    <i class="fas fa-tv"></i>
                                    TVDB External Source
                                </div>
                                <div class="subsection-content">
                                    <div class="form-group checkbox-group">
                                        <input type="checkbox" id="tvdbSource.enabled" name="tvdbSource.enabled">
                                        <label for="tvdbSource.enabled">Enable TVDB as Content Source</label>
                                    </div>
                                    <div class="form-group">
                                        <label for="tvdbSource.category">Content Category</label>
                                        <select id="tvdbSource.category" name="tvdbSource.category">
                                            <optgroup label="üèÜ By Rating & Popularity">
                                                <option value="top_rated">‚≠ê Top Rated</option>
                                                <option value="popular">üî• Most Popular</option>
                                            </optgroup>
                                            <optgroup label="üìÖ By Date">
                                                <option value="recently_updated">üÜï Recently Updated</option>
                                                <option value="newest">üì∫ Newest Releases</option>
                                                <option value="oldest">üìº Classic Content</option>
                                            </optgroup>
                                            <optgroup label="üìä By Activity">
                                                <option value="trending">üìà Trending Now</option>
                                                <option value="recently_added">‚ûï Recently Added to TVDB</option>
                                            </optgroup>
                                            <optgroup label="üî§ Alphabetical">
                                                <option value="alphabetical">üî§ A-Z Order</option>
                                            </optgroup>
                                        </select>
                                        <small class="help-text">üéØ Choose how to sort and discover content from TVDB's extensive database!</small>
                                    </div>
                                    <div class="form-group number-input-group">
                                        <div class="form-group">
                                            <label for="tvdbSource.movieCount">Movies to Display</label>
                                            <input type="number" id="tvdbSource.movieCount" name="tvdbSource.movieCount" min="0" max="500" value="25">
                                        </div>
                                        <div class="form-group">
                                            <label for="tvdbSource.showCount">TV Shows to Display</label>
                                            <input type="number" id="tvdbSource.showCount" name="tvdbSource.showCount" min="0" max="500" value="50">
                                        </div>
                                    </div>
                                    <div class="form-group number-input-group">
                                        <div class="form-group">
                                            <label for="tvdbSource.minRating">Minimum Rating</label>
                                            <input type="number" id="tvdbSource.minRating" name="tvdbSource.minRating" min="0" max="10" step="0.1" value="0">
                                        </div>
                                        <div class="form-group">
                                            <label for="tvdbSource.yearFilter">Year Filter</label>
                                            <input type="number" id="tvdbSource.yearFilter" name="tvdbSource.yearFilter" min="1900" max="2030" placeholder="e.g. 2023">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="tvdbSource.genreFilter">Genre Filter</label>
                                        <div class="genre-filter-container">
                                            <select id="tvdbSource.genreFilter" name="tvdbSource.genreFilter" multiple class="genre-filter-select">
                                                <option value="">Loading genres...</option>
                                            </select>
                                            <button type="button" class="btn-clear-genres" id="clearTvdbGenresBtn" title="Clear all selected genres">
                                                <i class="fas fa-times"></i> Clear Selection
                                            </button>
                                        </div>
                                        <small class="genre-filter-help">üí° Tip: Hold Ctrl (Windows) or Cmd (Mac) while clicking to select multiple genres. Click "Clear Selection" to show all content.</small>
                                    </div>
                                    
                                    <!-- TVDB Connection Test -->
                                    <div class="form-group">
                                        <button type="button" id="test-tvdb-connection" class="btn btn-primary">
                                            <i class="fas fa-plug icon"></i>
                                            <span>Test TVDB Connection</span>
                                        </button>
                                        <small id="tvdb-connection-status"></small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Authentication Section -->
                    <section class="section-content" id="authentication-section" role="tabpanel" aria-labelledby="authentication-tab">
                        <div class="section-main-content">
                            <div class="section-title">
                                <i class="fas fa-shield-alt"></i>
                                Authentication & Security
                            </div>
                            
                            <!-- Unified Authentication & Security Container -->
                            <div class="form-section unified-section">
                                
                                <!-- Password Management Subsection -->
                                <div class="subsection-header">
                                    <i class="fas fa-key"></i>
                                    Password Management
                                </div>
                                <div class="subsection-content">
                                    <div id="password-form">
                                        <div class="form-group">
                                            <label for="currentPassword">Current Password</label>
                                            <input type="password" id="currentPassword" name="currentPassword" autocomplete="current-password">
                                        </div>
                                        <div class="form-group">
                                            <label for="newPassword">New Password</label>
                                            <input type="password" id="newPassword" name="newPassword" autocomplete="new-password">
                                        </div>
                                        <div class="form-group">
                                            <label for="confirmPassword">Confirm New Password</label>
                                            <input type="password" id="confirmPassword" name="confirmPassword" autocomplete="new-password">
                                        </div>
                                        <div class="form-actions">
                                            <button type="button" id="change-password-button" class="btn btn-primary">
                                                <i class="fas fa-lock icon"></i>
                                                <span>Change Password</span>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Two-Factor Authentication Subsection -->
                                <div class="subsection-header">
                                    <i class="fas fa-mobile-alt"></i>
                                    Two-Factor Authentication (2FA)
                                </div>
                                <div class="subsection-content">
                                    <div class="form-group checkbox-group">
                                        <input type="checkbox" id="enable2FA" name="enable2FA">
                                        <label for="enable2FA">Setup Two-Factor Authentication</label>
                                    </div>
                                    <div id="2fa-status-text" class="status-text disabled"></div>
                                </div>
                                
                                <!-- API Access Management Subsection -->
                                <div class="subsection-header">
                                    <i class="fas fa-code"></i>
                                    API Access Management
                                </div>
                                <div class="subsection-content">
                                    <div class="form-group">
                                        <p>Manage a permanent API key for use with external applications or scripts (like Swagger).</p>
                                    </div>
                                    <div class="form-group" id="api-key-status">
                                        <p>Status: <span id="api-key-status-text" class="status-text">Loading...</span></p>
                                    </div>
                                    <div id="api-key-display-container" class="is-hidden form-group">
                                        <label>Current API Key:</label>
                                        <div class="api-key-display-container">
                                            <input id="api-key-input" type="password" readonly>
                                            <button id="toggle-api-key-visibility-button" type="button" class="btn btn-icon" title="Show/hide key">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                            <button id="copy-api-key-button" type="button" class="btn btn-icon" title="Copy to clipboard">
                                                <i class="fas fa-copy"></i>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="form-actions">
                                        <button id="generate-api-key-button" type="button" class="btn btn-primary">
                                            <i class="fas fa-key"></i>
                                            Generate New Key
                                        </button>
                                        <button id="revoke-api-key-button" type="button" class="btn btn-danger" disabled>
                                            <i class="fas fa-trash-alt"></i>
                                            Revoke Key
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Promobox Site Settings Section -->
                    <section class="section-content" id="promobox-section" role="tabpanel" aria-labelledby="promobox-tab">
                        <div class="section-main-content">
                            <div class="section-title">
                                <i class="fas fa-globe"></i>
                                Promobox Site
                            </div>
                            
                            <!-- Unified Promobox Site Container -->
                            <div class="form-section unified-section">
                                
                                <!-- Site Configuration Subsection -->
                                <div class="subsection-header">
                                    <i class="fas fa-server"></i>
                                    Site Configuration
                                </div>
                                <div class="subsection-content">
                                    <div class="form-group checkbox-group">
                                        <input type="checkbox" id="siteServer.enabled" name="siteServer.enabled">
                                        <label for="siteServer.enabled">Enable Promobox Site</label>
                                    </div>
                                    <div class="form-group site-server-port-group" id="siteServerPortGroup">
                                        <label for="siteServer.port">Promobox Site Port</label>
                                        <input type="number" id="siteServer.port" name="siteServer.port" min="1024" max="65535" value="4001">
                                    </div>
                                </div>
                                
                                <!-- Site Status Subsection -->
                                <div class="subsection-header">
                                    <i class="fas fa-info-circle"></i>
                                    Site Status
                                </div>
                                <div class="subsection-content">
                                    <div id="siteServerStatus" class="status-indicator site-server-status">
                                        <div class="status-badge">
                                            <span class="status-icon">üåê</span>
                                            <span class="status-text">Promobox site running on <a href="http://localhost:4001" target="_blank" class="status-link">http://localhost:4001</a></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Management Section -->
                    <section class="section-content" id="management-section" role="tabpanel" aria-labelledby="management-tab">
                        <div class="section-main-content">
                            <div class="section-title">
                                <i class="fas fa-tools"></i>
                                Management & Tools
                            </div>
                            
                            <!-- Unified Management & Tools Container -->
                            <div class="form-section unified-section">
                                
                                <!-- Cache Management Subsection -->
                                <div class="subsection-header">
                                    <i class="fas fa-database"></i>
                                    Cache Management
                                </div>
                                <div class="subsection-content">
                                    <!-- Cache Configuration -->
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="cache-max-size" class="form-label">
                                                <i class="fas fa-hdd"></i>
                                                Maximum Cache Size (GB)
                                            </label>
                                            <input type="number" id="cache-max-size" name="cache-max-size" class="form-input" min="0.5" max="100" step="0.5" value="2">
                                            <div class="form-help">Maximum disk space for cached images (default: 2GB)</div>
                                        </div>
                                        <div class="form-group">
                                            <label for="min-free-space" class="form-label">
                                                <i class="fas fa-shield-alt"></i>
                                                Minimum Free Disk Space (MB)
                                            </label>
                                            <input type="number" id="min-free-space" name="min-free-space" class="form-input" min="100" max="5000" step="50" value="500">
                                            <div class="form-help">Always maintain this amount of free disk space (default: 500MB)</div>
                                        </div>
                                    </div>
                                    
                                    <!-- Cache Size Display -->
                                    <div class="cache-stats-container" style="margin-bottom: 1rem;">
                                        <div class="stat-item">
                                            <div class="stat-label">
                                                <i class="fas fa-hdd"></i>
                                                Cache Storage
                                            </div>
                                            <div class="stat-value" id="cache-disk-usage">
                                                <span class="loading">Loading...</span>
                                            </div>
                                        </div>
                                        <div class="stat-item">
                                            <div class="stat-label">
                                                <i class="fas fa-memory"></i>
                                                Memory Cache
                                            </div>
                                            <div class="stat-value" id="cache-item-count">
                                                <span class="loading">Loading...</span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Cache Actions - 2x2 Grid Layout -->
                                    <div class="form-actions" style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.5rem;">
                                        <button type="button" id="refresh-cache-stats" class="btn btn-secondary">
                                            <i class="fas fa-sync-alt icon"></i>
                                            <span>Refresh Stats</span>
                                        </button>
                                        <button type="button" id="cleanup-cache-button" class="btn btn-secondary">
                                            <i class="fas fa-compress-alt icon"></i>
                                            <span>Run Cleanup</span>
                                        </button>
                                        <div id="debug-cache-action" class="is-hidden" style="grid-column: 1;">
                                            <a href="/admin/debug" target="_blank" class="btn btn-primary" style="width: 100%; display: flex; align-items: center;">
                                                <i class="fas fa-database"></i>
                                                View Cache
                                            </a>
                                        </div>
                                        <button type="button" id="clear-cache-button" class="btn btn-primary">
                                            <i class="fas fa-broom icon"></i>
                                            <span>Clear Cache</span>
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- Media Management Subsection -->
                                <div class="subsection-header">
                                    <i class="fas fa-sync-alt"></i>
                                    Media Management
                                </div>
                                <div class="subsection-content">
                                    <div class="form-actions">
                                        <button type="button" id="refresh-media-button" class="btn btn-primary" disabled>
                                            <i class="fas fa-sync-alt icon"></i>
                                            <span>Refresh Media</span>
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- Application Controls Subsection -->
                                <div class="subsection-header">
                                    <i class="fas fa-power-off"></i>
                                    Application Controls
                                </div>
                                <div class="subsection-content">
                                    <div class="form-actions form-actions-grid">
                                        <button type="button" id="restart-app-button" class="btn btn-danger">
                                            <i class="fas fa-power-off icon"></i>
                                            <span>Restart Application</span>
                                        </button>
                                        <button type="button" id="status-check-button" class="btn btn-primary">
                                            <i class="fas fa-heartbeat icon"></i>
                                            <span>Status Check</span>
                                        </button>
                                        <button type="button" id="update-check-button" class="btn btn-secondary">
                                            <i class="fas fa-download icon"></i>
                                            <span>Update Check</span>
                                        </button>
                                        <button type="button" id="performance-monitor-button" class="btn btn-info">
                                            <i class="fas fa-chart-line icon"></i>
                                            <span>Performance Monitor</span>
                                        </button>
                                    </div>
                                    
                                    <!-- Status Display Areas -->
                                    <div id="status-display" class="status-display" style="display: none;">
                                        <div class="status-header">
                                            <h4><i class="fas fa-heartbeat"></i> System Status</h4>
                                        </div>
                                        <div id="status-content" class="status-content">
                                            <div class="loading">Checking system status...</div>
                                        </div>
                                    </div>
                                    
                                    <div id="update-display" class="status-display" style="display: none;">
                                        <div class="status-header">
                                            <h4><i class="fas fa-download"></i> Update Check</h4>
                                        </div>
                                        <div id="update-content" class="status-content">
                                            <div class="loading">Checking for updates...</div>
                                        </div>
                                    </div>
                                    
                                    <div id="performance-display" class="status-display" style="display: none;">
                                        <div class="status-header">
                                            <h4><i class="fas fa-chart-line"></i> Performance Monitor</h4>
                                        </div>
                                        <div id="performance-content" class="status-content">
                                            <div class="loading">Loading performance data...</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Logs & Debug Section -->
                    <section class="section-content" id="logs-section" role="tabpanel" aria-labelledby="logs-tab">
                        <div class="section-main-content">
                            <div class="section-title">
                                <i class="fas fa-file-alt"></i>
                                Logs & Debug
                            </div>
                            
                            <!-- Unified Logs & Debug Container -->
                            <div class="form-section unified-section">
                                
                                <!-- Debug Tools Subsection -->
                                <div class="subsection-header">
                                    <i class="fas fa-bug"></i>
                                    Debug Tools
                                </div>
                                <div class="subsection-content">
                                    <div class="form-actions">
                                        <a href="/admin/logs" target="_blank" class="btn btn-primary">
                                            <i class="fas fa-terminal"></i>
                                            View Live Logs
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                    
                    <!-- Save Settings Button -->
                    <div class="form-save-section">
                        <div id="config-status">
                            <i class="fas fa-check-circle"></i>
                            Ready to save
                        </div>
                        <button type="submit" id="save-config-button" class="btn btn-primary">
                            <i class="fas fa-save"></i>
                            <span>Save Settings</span>
                        </button>
                    </div>
                </form>

            </main>
        </div> <!-- Close main-content -->
        
    </div> <!-- Close admin-layout -->

    <!-- Quick Help Panel -->
    <aside id="quick-help-panel" class="quick-help-panel" role="dialog" aria-modal="true" aria-labelledby="help-title" aria-hidden="true">
        <div class="help-header">
            <h3 id="help-title">General Settings Help</h3>
            <button class="btn btn-icon" id="close-help-panel" aria-label="Close help panel">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="help-content" id="help-content" role="document">
            <div class="help-section">
                <h4>Transition Interval</h4>
                <p>Controls how long each poster is displayed before switching to the next one. Set between 1-300 seconds. Shorter intervals create more dynamic displays, while longer intervals are better for reading metadata.</p>
            </div>
            <div class="help-section">
                <h4>Background Refresh</h4>
                <p>How often the system fetches new content from your media server. Set to 0 to disable automatic refresh. Regular refreshing ensures new content appears in the rotation.</p>
            </div>
            <div class="help-section">
                <h4>Application Port</h4>
                <p>The network port for the admin interface. Default is 4000. Changing this requires an application restart. Make sure the port isn't used by other applications.</p>
            </div>
            <div class="help-section">
                <h4>Debug Mode</h4>
                <p>Enables detailed logging for troubleshooting. Check the live logs to see debug information. Only enable when investigating issues as it can impact performance.</p>
            </div>
        </div>
    </div>

    <!-- 2FA Setup Modal -->
    <div id="2fa-modal" class="modal is-hidden">
        <div class="modal-background"></div>
        <div class="modal-content">
            <h2 id="2fa-modal-title">Setup Two-Factor Authentication</h2>
            <p id="2fa-modal-intro">Follow these steps to secure your account with 2FA:</p>
            <ol style="margin: 1rem 0; padding-left: 1.5rem;">
                <li>Install an authenticator app (Google Authenticator, Authy, Microsoft Authenticator, etc.)</li>
                <li>Scan the QR code below with your authenticator app</li>
                <li>Enter the 6-digit code from your app to complete setup</li>
            </ol>
            <div id="qr-code-container" style="text-align: center; margin: 1.5rem 0;">
                <!-- QR code will be inserted here by JS -->
            </div>
            <form id="2fa-verify-form">
                <div class="form-group">
                    <label for="2fa-token">Enter verification code from your authenticator app</label>
                    <input type="text" id="2fa-token" name="2fa-token" required pattern="\d{6}" maxlength="6" autocomplete="one-time-code" inputmode="numeric" placeholder="000000" style="text-align: center; font-size: 1.2rem; letter-spacing: 0.2rem;">
                </div>
                <div class="form-actions">
                    <button type="button" id="cancel-2fa-button" class="btn btn-secondary">Cancel Setup</button>
                    <button type="submit" class="btn btn-primary">Complete Setup</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Disable 2FA Confirmation Modal -->
    <div id="disable-2fa-modal" class="modal is-hidden">
        <div class="modal-background"></div>
        <div class="modal-content">
            <h2>Disable Two-Factor Authentication</h2>
            <p><strong>‚ö†Ô∏è Warning:</strong> Disabling 2FA will make your account less secure.</p>
            <p>Please enter your current password to confirm this change:</p>
            <form id="disable-2fa-form">
                <div class="form-group">
                    <label for="disable-2fa-password">Current Password</label>
                    <input type="password" id="disable-2fa-password" name="password" required autocomplete="current-password">
                </div>
                <div class="form-actions">
                    <button type="button" id="cancel-disable-2fa-button" class="btn btn-secondary">Keep 2FA Enabled</button>
                    <button type="submit" class="btn btn-danger">Disable 2FA</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Load admin JavaScript -->
    <script src="/admin.js?v=20250815" defer></script>
</body>
</html>