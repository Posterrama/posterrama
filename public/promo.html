<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>Posterrama - Promo Site</title>

        <!-- Preconnects for performance -->
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&family=Kalam:wght@400;700&display=swap"
            rel="stylesheet"
        />

        <!-- Font Awesome for icons -->
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
            integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"
        />

        <link rel="stylesheet" href="style.css?v=20250819b" />
        <style>
            #loader {
                display: none !important;
            }

            /* FORCE promo box to be visible - ALWAYS override any script changes */
            #promo-box {
                display: block !important;
                opacity: 1 !important;
                transform: translate(-50%, -50%) scale(1) !important;
                z-index: 99999 !important;
                visibility: visible !important;
                position: fixed !important;
                top: 50% !important;
                left: 50% !important;
            }

            /* COMPLETELY BLOCK wallart mode on promo site - removed, now handled by server config */

            /* IMPORTANT: Let main site CSS handle all mode visibility */
            /* All modes (cinema, wallart, screensaver) should work identically to main site */

            /* FORCE cinema mode controls to stay hidden on promo site */
            body.cinema-mode #controls-container,
            body.cinema-mode #controls-container.visible {
                display: none !important;
                visibility: hidden !important;
                opacity: 0 !important;
            }

            /* Show controls on promo site only when NOT in cinema mode */
            body.promo-site:not(.cinema-mode) #controls-container.visible {
                display: flex !important;
                flex-direction: row !important;
                gap: 15px !important;
                visibility: visible !important;
                opacity: 1 !important;
            }

            /* IMPORTANT: Let main site CSS handle clock visibility based on mode */
            /* Clock should only be visible in screensaver mode, not cinema or wallart */

            /* Let main site CSS handle all layer and info-container animations */
            /* DON'T force visibility on layers - they need to transition */

            /* PROMO SITE SPECIFIC: Ensure clock is positioned correctly ONLY in screensaver mode */
            body.promo-site.screensaver-mode #clock-widget-container {
                position: fixed !important;
                top: 30px !important;
                left: 50px !important;
                z-index: 10 !important;
                display: block !important;
            }

            /* Ensure promo box doesn't interfere with clock positioning */
            body.promo-site #promo-box {
                z-index: 99999 !important;
            }
        </style>

        <script>
            // Minimal promo site setup - don't interfere with main app modes
            function setupPromoSite() {
                // Only add promo-site class, let main app handle mode classes
                document.body.classList.add('promo-site');

                // Show promo box only
                const promoBox = document.getElementById('promo-box');
                if (promoBox) {
                    promoBox.style.display = 'block';
                    promoBox.style.opacity = '1';
                    promoBox.style.visibility = 'visible';
                    promoBox.classList.remove('is-hidden');
                }

                // Setup controls auto-hide (one time only) - but respect cinema mode
                const controlsContainer = document.getElementById('controls-container');
                if (controlsContainer && !window._controlsSetup) {
                    window._controlsSetup = true;

                    let controlsTimer = null;

                    function showControls() {
                        // Don't show controls in cinema mode
                        if (document.body.classList.contains('cinema-mode')) {
                            return;
                        }
                        controlsContainer.classList.add('visible');
                        document.body.style.cursor = 'default';
                        clearTimeout(controlsTimer);
                        controlsTimer = setTimeout(() => {
                            controlsContainer.classList.remove('visible');
                            document.body.style.cursor = 'none';
                        }, 3000);
                    }

                    document.body.addEventListener('mousemove', showControls);
                    document.body.addEventListener('touchstart', showControls, { passive: true });
                    
                    // Only show controls initially if not in cinema mode
                    if (!document.body.classList.contains('cinema-mode')) {
                        showControls();
                    }
                }

                // IMPORTANT: Let the main script handle clock initialization
                // We just ensure the promo site doesn't interfere
                
                // Debug: Check if clock elements exist and are being updated
                setTimeout(() => {
                    const timeHours = document.getElementById('time-hours');
                    const timeMinutes = document.getElementById('time-minutes');
                    if (timeHours && timeMinutes) {
                        // If clock elements are empty after 2 seconds, manually trigger update
                        if (!timeHours.textContent || !timeMinutes.textContent) {
                            // Try to call main app's updateClock if it exists
                            if (window.updateClock && typeof window.updateClock === 'function') {
                                window.updateClock();
                            }
                        }
                    }
                }, 2000);
            }

            // Let main app handle all mode switching
            // Promo site shows promo box on top of any mode

            // Initialize
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', setupPromoSite);
            } else {
                setupPromoSite();
            }

            // Delay setup to let main script initialize first
            window.addEventListener('load', () => {
                setTimeout(setupPromoSite, 100);
            });

            // Very minimal check - ensure promo-site class stays
            setInterval(() => {
                if (!document.body.classList.contains('promo-site')) {
                    document.body.classList.add('promo-site');
                    setupPromoSite(); // Re-ensure promo box is visible
                }
            }, 15000);
        </script>
    </head>
    <body>
        <div id="loader" style="display: none">
            <div class="poster-loader"></div>
            <div class="loader-text">Loading...</div>
            <div class="loader-dots">
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
            </div>
        </div>
        <div id="error-message" class="is-hidden"></div>

        <main id="promo-box" class="is-hidden" style="display: none">
            <header class="promo-logo">
                <svg
                    role="img"
                    aria-label="Posterrama Digital Movie Poster App Logo"
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    fill="currentColor"
                >
                    <path d="M6 2H16L14 22H4L6 2Z" />
                    <path d="M10 2H20L18 22H8L10 2Z" style="mix-blend-mode: screen; opacity: 0.6" />
                </svg>
            </header>
            <h1>Bring your media library to life.</h1>
            <p>
                This is <span class="promo-brand-name">Posterrama</span>, a stunning, self-hosted
                digital movie<span class="movie-extensions">+ music & games</span> poster app that
                transforms your screens into personal cinemas and elegant screensavers.
            </p>

            <!-- Hidden SEO content -->
            <div class="seo-content" style="position: absolute; left: -9999px; top: -9999px">
                <h2>Features</h2>
                <ul>
                    <li>Digital movie poster displays for home theaters</li>
                    <li>Cinema mode for portrait orientation screens</li>
                    <li>Beautiful screensavers from your media collection</li>
                    <li>Self-hosted media management</li>
                    <li>Plex media server integration</li>
                    <li>Multi-screen support for digital signage</li>
                    <li>Responsive design for all devices</li>
                    <li>Open source and free to use</li>
                </ul>

                <h2>Perfect for</h2>
                <ul>
                    <li>Home theater enthusiasts</li>
                    <li>Media room displays</li>
                    <li>Digital signage projects</li>
                    <li>Plex server companions</li>
                    <li>Movie collection showcases</li>
                    <li>Personal cinema setups</li>
                </ul>
            </div>

            <section class="promo-cta">
                <a
                    href="https://github.com/Posterrama/posterrama"
                    target="_blank"
                    rel="noopener noreferrer"
                    class="button-promo"
                    aria-label="Download Posterrama from GitHub"
                >
                    <i class="fab fa-github"></i>
                    Get it on GitHub
                </a>
            </section>
        </main>

        <div id="layer-a" class="screensaver-layer"></div>
        <div id="layer-b" class="screensaver-layer"></div>
        <div id="background-image"></div>

        <div id="clock-widget-container">
            <div id="time-widget">
                <span id="time-hours"></span>
                <span id="time-separator">:</span>
                <span id="time-minutes"></span>
            </div>
        </div>

        <div id="clearlogo-container">
            <img id="clearlogo" src="" alt="ClearLogo" />
        </div>

        <div id="info-container">
            <div id="poster-wrapper">
                <a id="poster-link" href="#" target="_blank">
                    <div id="poster-a" class="poster-layer"></div>
                    <div id="poster-b" class="poster-layer"></div>
                    <div id="poster"></div>
                </a>
            </div>
            <div id="text-wrapper">
                <h1 id="title"></h1>
                <p id="tagline"></p>
                <div id="meta-info">
                    <span id="year"></span>
                    <span id="rating"></span>
                </div>
            </div>
        </div>

        <div id="controls-container">
            <button id="prev-button" aria-label="Previous">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z" />
                </svg>
            </button>
            <button id="pause-button" aria-label="Pause/Resume">
                <svg
                    class="icon-pause"
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    fill="currentColor"
                >
                    <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z" />
                </svg>
                <svg
                    class="icon-play"
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    fill="currentColor"
                >
                    <path d="M8 5v14l11-7z" />
                </svg>
            </button>
            <button id="next-button" aria-label="Next">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z" />
                </svg>
            </button>
        </div>

        <div id="branding-container">
            <a
                href="https://posterrama.app"
                target="_blank"
                rel="noopener noreferrer"
                title="posterrama.app"
            >
                <svg
                    role="img"
                    aria-label="posterrama.app Logo"
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    fill="currentColor"
                >
                    <path d="M6 2H16L14 22H4L6 2Z" />
                    <path d="M10 2H20L18 22H8L10 2Z" style="mix-blend-mode: screen; opacity: 0.6" />
                </svg>
            </a>
        </div>

        <script src="script.js?v=20250819b"></script>
    </body>
</html>
