# Coverage Report (Per-file)

This table is generated from Istanbul JSON and LCOV after running tests with coverage.
To regenerate: npm run coverage:table

## All files meet configured per-file thresholds

## Full per-file coverage

| File                          | Statements (cov/total) | Statements % | Branches (cov/total) | Branches % | Functions (cov/total) | Functions % | Lines (cov/total) | Lines % | Meets thresholds |
| ----------------------------- | ---------------------: | -----------: | -------------------: | ---------: | --------------------: | ----------: | ----------------: | ------: | :--------------: |
| utils/jellyfin-http-client.js |                 20/310 |         6.45 |               14/255 |       5.49 |                  1/44 |        2.27 |            20/298 |    6.71 |        ✅        |
| utils/wsHub.js                |                 36/228 |        15.79 |               13/152 |       8.55 |                  8/24 |       33.33 |            36/227 |   15.86 |        ✅        |
| utils/profilesStore.js        |                  13/72 |        18.06 |                 3/44 |       6.82 |                  0/14 |           0 |             13/63 |   20.63 |        ✅        |
| middleware/testSessionShim.js |                    1/5 |           20 |                  0/6 |          0 |                   0/1 |           0 |               1/5 |      20 |        ✅        |
| utils/rating-cache.js         |                  13/49 |        26.53 |                 0/12 |          0 |                   2/8 |          25 |             13/49 |   26.53 |        ✅        |
| sources/tmdb.js               |                144/386 |        37.31 |               67/311 |      21.54 |                 18/51 |       35.29 |           139/368 |   37.77 |        ✅        |
| sources/jellyfin.js           |                123/272 |        45.22 |               90/264 |      34.09 |                 18/30 |          60 |           119/256 |   46.48 |        ✅        |
| utils/request-deduplicator.js |                  31/66 |        46.97 |                 6/17 |      35.29 |                  9/22 |       40.91 |             30/63 |   47.62 |        ✅        |
| utils/metrics.js              |                227/483 |           47 |               87/290 |         30 |                53/101 |       52.48 |           213/436 |   48.85 |        ✅        |
| utils/capabilityRegistry.js   |                372/763 |        48.75 |               85/416 |      20.43 |               151/272 |       55.51 |           366/738 |   49.59 |        ✅        |
| utils/deviceStore.js          |                177/327 |        54.13 |              133/300 |      44.33 |                 31/51 |       60.78 |           159/267 |   59.55 |        ✅        |
| utils/mqttBridge.js           |                285/417 |        68.35 |              168/271 |      61.99 |                 33/44 |          75 |           282/404 |    69.8 |        ✅        |
| middleware/validate.js        |                 81/116 |        69.83 |                33/53 |      62.26 |                 12/19 |       63.16 |            77/111 |   69.37 |        ✅        |
| utils/plex-client-ctrl.js     |                  57/79 |        72.15 |                43/57 |      75.44 |                 13/13 |         100 |             54/76 |   71.05 |        ✅        |
| sources/plex.js               |                280/384 |        72.92 |              191/311 |      61.41 |                 55/64 |       85.94 |           251/345 |   72.75 |        ✅        |
| middleware/index.js           |                  70/95 |        73.68 |               77/106 |      72.64 |                 12/16 |          75 |             65/84 |   77.38 |        ✅        |
| middleware/deviceBypass.js    |                  64/86 |        74.42 |                29/46 |      63.04 |                  9/14 |       64.29 |             59/72 |   81.94 |        ✅        |
| utils/cache.js                |                363/482 |        75.31 |              239/315 |      75.87 |                 47/54 |       87.04 |           358/466 |   76.82 |        ✅        |
| utils/configBackup.js         |                122/159 |        76.73 |               63/101 |      62.38 |                 12/15 |          80 |           113/143 |   79.02 |        ✅        |
| middleware/rateLimiter.js     |                    4/5 |           80 |                  2/4 |         50 |                   1/2 |          50 |               4/5 |      80 |        ✅        |
| middleware/user-context.js    |                  24/30 |           80 |                32/46 |      69.57 |                   2/4 |          50 |             24/30 |      80 |        ✅        |
| middleware/errorHandler.js    |                  66/80 |         82.5 |                54/68 |      79.41 |                   6/9 |       66.67 |             62/76 |   81.58 |        ✅        |
| utils/ratings.js              |                 89/107 |        83.18 |                30/46 |      65.22 |                 10/11 |       90.91 |            87/104 |   83.65 |        ✅        |
| utils/safeFileStore.js        |                109/125 |         87.2 |                31/41 |      75.61 |                  9/10 |          90 |           109/125 |    87.2 |        ✅        |
| config/environment.js         |                  59/67 |        88.06 |                47/55 |      85.45 |                 12/12 |         100 |             59/67 |   88.06 |        ✅        |
| utils/logger.js               |                141/158 |        89.24 |               65/103 |      63.11 |                 36/40 |          90 |           136/146 |   93.15 |        ✅        |
| sources/romm.js               |                144/157 |        91.72 |              302/352 |       85.8 |                 22/22 |         100 |           134/147 |   91.16 |        ✅        |
| swagger.js                    |                  80/87 |        91.95 |              106/119 |      89.08 |                   7/7 |         100 |             75/79 |   94.94 |        ✅        |
| middleware/metrics.js         |                  36/39 |        92.31 |                34/43 |      79.07 |                   3/4 |          75 |             36/39 |   92.31 |        ✅        |
| utils/romm-http-client.js     |                134/145 |        92.41 |               83/102 |      81.37 |                 16/16 |         100 |           128/132 |   96.97 |        ✅        |
| sources/example.js            |                  66/71 |        92.96 |                30/39 |      76.92 |                   5/6 |       83.33 |             65/67 |   97.01 |        ✅        |
| utils/github.js               |                  67/71 |        94.37 |                17/18 |      94.44 |                 12/14 |       85.71 |             67/71 |   94.37 |        ✅        |
| config/validators.js          |                  25/26 |        96.15 |                21/24 |       87.5 |                   6/6 |         100 |             23/24 |   95.83 |        ✅        |
| utils/errorLogger.js          |                  37/38 |        97.37 |                39/46 |      84.78 |                 14/14 |         100 |             35/35 |     100 |        ✅        |
| middleware/cache.js           |                  78/80 |         97.5 |                49/57 |      85.96 |                 18/20 |          90 |             77/78 |   98.72 |        ✅        |
| utils/source-error-handler.js |                  59/60 |        98.33 |                28/28 |        100 |                   9/9 |         100 |             57/58 |   98.28 |        ✅        |
| middleware/adminAuth.js       |                  29/29 |          100 |                43/44 |      97.73 |                   5/5 |         100 |             29/29 |     100 |        ✅        |
| middleware/asyncHandler.js    |                    3/3 |          100 |                  0/0 |        100 |                   2/2 |         100 |               3/3 |     100 |        ✅        |
| middleware/auth.js            |                    4/4 |          100 |                  0/0 |        100 |                   2/2 |         100 |               3/3 |     100 |        ✅        |
| middleware/validation.js      |                  20/20 |          100 |                  8/8 |        100 |                   5/5 |         100 |             18/18 |     100 |        ✅        |
| utils/array-utils.js          |                    6/6 |          100 |                  0/0 |        100 |                   1/1 |         100 |               5/5 |     100 |        ✅        |
| utils/auditLogger.js          |                    9/9 |          100 |                 9/12 |         75 |                   2/2 |         100 |               9/9 |     100 |        ✅        |
| utils/client-fallback.js      |                  17/17 |          100 |                11/14 |      78.57 |                   5/5 |         100 |             11/11 |     100 |        ✅        |
| utils/debug.js                |                  11/11 |          100 |                10/10 |        100 |                   5/5 |         100 |             11/11 |     100 |        ✅        |
| utils/deep-merge.js           |                  13/13 |          100 |                13/13 |        100 |                   2/2 |         100 |             11/11 |     100 |        ✅        |
| utils/errors.js               |                  93/93 |          100 |                65/71 |      91.55 |                 14/14 |         100 |             90/90 |     100 |        ✅        |
| utils/source-error-context.js |                  39/39 |          100 |                28/31 |      90.32 |                   7/7 |         100 |             38/38 |     100 |        ✅        |
| utils/userAgent.js            |                  20/20 |          100 |                15/15 |        100 |                   7/7 |         100 |             20/20 |     100 |        ✅        |
| utils/wsMessageValidator.js   |                  35/35 |          100 |                20/20 |        100 |                   8/8 |         100 |             34/34 |     100 |        ✅        |
