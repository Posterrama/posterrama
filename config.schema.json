{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Posterrama Configuration",
    "description": "Schema for the Posterrama config.json file.",
    "type": "object",
    "properties": {
        "syncEnabled": {
            "description": "Enable global sync-tick alignment across devices.",
            "type": "boolean",
            "default": true
        },
        "syncAlignMaxDelayMs": {
            "description": "Maximum milliseconds before a sync boundary at which clients will realign to the global tick.",
            "type": "integer",
            "minimum": 0,
            "default": 1200
        },
        "transitionIntervalSeconds": {
            "description": "How many seconds each poster is visible.",
            "type": "integer",
            "minimum": 1
        },
        "backgroundRefreshMinutes": {
            "description": "How often (in minutes) the entire media library is re-fetched. 0 to disable.",
            "type": "integer",
            "minimum": 0
        },
        "showClearLogo": {
            "description": "Shows the movie/series logo (if available).",
            "type": "boolean"
        },
        "showRottenTomatoes": {
            "description": "Shows a 'Fresh' or 'Rotten' badge on the poster.",
            "type": "boolean"
        },
        "rottenTomatoesMinimumScore": {
            "description": "Filters media to only show items with this score or higher. Set to 0 to disable.",
            "type": "number",
            "minimum": 0,
            "maximum": 10
        },
        "showPoster": {
            "description": "Shows the poster.",
            "type": "boolean"
        },
        "showMetadata": {
            "description": "Shows metadata (title, tagline, etc.). Requires 'showPoster' to be enabled.",
            "type": "boolean"
        },
        "clockWidget": {
            "description": "Shows a clock in the top left of the screen.",
            "type": "boolean"
        },
        "clockTimezone": {
            "description": "Timezone for the clock widget (IANA timezone identifier like 'Europe/Amsterdam', 'America/New_York'). Defaults to system timezone.",
            "type": "string",
            "default": "auto"
        },
        "clockFormat": {
            "description": "Clock display format: '12h' for 12-hour format with AM/PM, '24h' for 24-hour format.",
            "type": "string",
            "enum": ["12h", "24h"],
            "default": "24h"
        },
        "wallartMode": {
            "description": "Enable wallart mode - displays multiple posters/covers in a grid layout. Shows many items simultaneously like a digital art gallery.",
            "type": "object",
            "properties": {
                "enabled": {
                    "type": "boolean",
                    "default": false
                },
                "density": {
                    "type": "string",
                    "enum": ["low", "medium", "high", "ludicrous"],
                    "default": "medium",
                    "description": "Grid density preset that influences number of rows/columns"
                },
                "refreshRate": {
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 10,
                    "default": 5,
                    "description": "Relative refresh tempo (1=slow, 10=fast)"
                },
                "randomness": {
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 10,
                    "default": 3,
                    "description": "Amount of random staggering in the cycle timing"
                },
                "animationType": {
                    "type": "string",
                    "enum": [
                        "random",
                        "fade",
                        "slideLeft",
                        "slideUp",
                        "zoom",
                        "flip",
                        "staggered",
                        "ripple",
                        "scanline",
                        "parallax",
                        "neonPulse",
                        "chromaticShift",
                        "mosaicShatter"
                    ],
                    "default": "fade",
                    "description": "Animation style used for grid updates"
                },
                "layoutVariant": {
                    "type": "string",
                    "enum": ["classic", "heroGrid"],
                    "default": "heroGrid",
                    "description": "Wallart layout variant - heroGrid recommended for modern look"
                },
                "ambientGradient": {
                    "type": "boolean",
                    "default": false,
                    "description": "Enable subtle ambient gradient background overlay"
                },
                "layoutSettings": {
                    "type": "object",
                    "properties": {
                        "heroGrid": {
                            "type": "object",
                            "properties": {
                                "heroSide": {
                                    "type": "string",
                                    "enum": ["left", "right"],
                                    "default": "left"
                                },
                                "heroRotationMinutes": {
                                    "type": "integer",
                                    "minimum": 1,
                                    "maximum": 60,
                                    "default": 10
                                },
                                "biasAmbientToHero": {
                                    "type": "boolean",
                                    "default": true,
                                    "description": "Weight ambient gradient sampling more toward the hero image"
                                }
                            }
                        }
                    }
                },

                "itemsPerScreen": {
                    "type": "number",
                    "minimum": 4,
                    "maximum": 100,
                    "default": 30,
                    "description": "Number of posters to display simultaneously in grid layout"
                },
                "columns": {
                    "type": "number",
                    "minimum": 2,
                    "maximum": 12,
                    "default": 6,
                    "description": "Number of columns in the grid layout"
                },
                "transitionInterval": {
                    "type": "number",
                    "minimum": 5,
                    "maximum": 300,
                    "default": 30,
                    "description": "Seconds between grid updates (replacing old posters with new ones)"
                }
            }
        },
        "cinemaMode": {
            "description": "Enable cinema mode for portrait displays with fullscreen poster layout.",
            "type": "boolean",
            "default": false
        },
        "cinemaOrientation": {
            "description": "Force a specific portrait orientation for cinema mode instead of relying on device sensors.",
            "type": "string",
            "enum": ["auto", "portrait", "portrait-flipped"],
            "default": "auto"
        },
        "transitionEffect": {
            "description": "Visual transition effect for background images and posters. Duration is automatically calculated based on transition interval.",
            "type": "string",
            "enum": ["none", "kenburns", "fade", "slide"],
            "default": "kenburns"
        },
        "effectPauseTime": {
            "description": "Time to pause after effect completes before next transition in seconds (not applied to Ken Burns effect).",
            "type": "number",
            "minimum": 0,
            "maximum": 10,
            "default": 2
        },
        "uiScaling": {
            "description": "Scaling settings for UI elements to adapt to different screen sizes and resolutions.",
            "type": "object",
            "properties": {
                "content": {
                    "type": "integer",
                    "minimum": 50,
                    "maximum": 200,
                    "default": 100,
                    "description": "Poster and metadata content size scaling percentage (50-200%)"
                },
                "clearlogo": {
                    "type": "integer",
                    "minimum": 50,
                    "maximum": 200,
                    "default": 100,
                    "description": "Clearlogo size scaling percentage (50-200%)"
                },
                "clock": {
                    "type": "integer",
                    "minimum": 50,
                    "maximum": 200,
                    "default": 100,
                    "description": "Clock widget size scaling percentage (50-200%)"
                },
                "global": {
                    "type": "integer",
                    "minimum": 50,
                    "maximum": 200,
                    "default": 100,
                    "description": "Global scaling multiplier for all UI elements (50-200%)"
                }
            },
            "required": ["content", "clearlogo", "clock", "global"]
        },
        "mediaServers": {
            "description": "An array of media server configurations.",
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "name": {
                        "type": "string",
                        "description": "A friendly name for this server.",
                        "minLength": 1
                    },
                    "type": {
                        "type": "string",
                        "enum": ["plex", "jellyfin"],
                        "description": "The type of the media server."
                    },
                    "enabled": {
                        "type": "boolean",
                        "description": "Whether this server configuration is active."
                    },
                    "hostnameEnvVar": {
                        "type": "string",
                        "description": "The name of the environment variable for the hostname.",
                        "minLength": 1
                    },
                    "portEnvVar": {
                        "type": "string",
                        "description": "The name of the environment variable for the port.",
                        "minLength": 1
                    },
                    "tokenEnvVar": {
                        "type": "string",
                        "description": "The name of the environment variable for the authentication token.",
                        "minLength": 1
                    },
                    "movieLibraryNames": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "showLibraryNames": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "recentlyAddedOnly": {
                        "type": "boolean",
                        "description": "Only fetch recently added items.",
                        "default": false
                    },
                    "recentlyAddedDays": {
                        "type": "integer",
                        "description": "Number of days to consider as 'recently added'.",
                        "minimum": 1,
                        "default": 30
                    },
                    "ratingFilter": {
                        "type": "array",
                        "description": "List of allowed content ratings (e.g., ['G', 'PG', 'PG-13']).",
                        "items": {
                            "type": "string"
                        }
                    },
                    "genreFilter": {
                        "type": "string",
                        "description": "Comma-separated list of allowed genres for filtering content.",
                        "default": ""
                    },
                    "ratingFilters": {
                        "type": "object",
                        "description": "Rating-based filtering options (Jellyfin only).",
                        "properties": {
                            "minCommunityRating": {
                                "type": "number",
                                "description": "Minimum community rating (0-10 scale).",
                                "minimum": 0,
                                "maximum": 10
                            },
                            "allowedOfficialRatings": {
                                "type": "array",
                                "description": "List of allowed MPAA ratings (e.g., ['G', 'PG', 'PG-13']).",
                                "items": {
                                    "type": "string"
                                }
                            },
                            "minUserRating": {
                                "type": "number",
                                "description": "Minimum user rating (personal rating 0-10 scale).",
                                "minimum": 0,
                                "maximum": 10
                            }
                        }
                    }
                },
                "required": [
                    "name",
                    "type",
                    "enabled",
                    "hostnameEnvVar",
                    "portEnvVar",
                    "tokenEnvVar"
                ]
            }
        },
        "siteServer": {
            "description": "Configuration for the optional public-facing site server.",
            "type": "object",
            "properties": {
                "enabled": {
                    "type": "boolean",
                    "default": false
                },
                "port": {
                    "type": "integer",
                    "minimum": 1024,
                    "maximum": 65535,
                    "default": 4001
                }
            },
            "required": ["enabled", "port"]
        },
        "plexClientOptions": {
            "description": "Advanced options to pass to the plex-api client.",
            "type": "object"
        }
    },
    "required": [
        "transitionIntervalSeconds",
        "backgroundRefreshMinutes",
        "showClearLogo",
        "showRottenTomatoes",
        "rottenTomatoesMinimumScore",
        "showPoster",
        "showMetadata",
        "clockWidget",
        "transitionEffect",
        "effectPauseTime",
        "mediaServers"
    ]
}
