{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Posterrama Configuration",
    "description": "Schema for the Posterrama config.json file.",
    "type": "object",
    "properties": {
        "syncEnabled": {
            "description": "Enable synchronized transitions across devices. When false, each device advances independently.",
            "type": "boolean",
            "default": true
        },
        "syncAlignMaxDelayMs": {
            "description": "Maximum milliseconds before a sync boundary at which clients will realign to the global tick.",
            "type": "integer",
            "minimum": 0,
            "default": 1200
        },
        "transitionIntervalSeconds": {
            "description": "How many seconds each poster is visible.",
            "type": "integer",
            "minimum": 5,
            "default": 10
        },
        "backgroundRefreshMinutes": {
            "description": "How often (in minutes) the entire media library is re-fetched. 0 to disable.",
            "type": "integer",
            "minimum": 5,
            "default": 60
        },
        "showClearLogo": {
            "description": "Shows the movie/series logo (if available).",
            "type": "boolean",
            "default": true
        },
        "showRottenTomatoes": {
            "description": "Shows a 'Fresh' or 'Rotten' badge on the poster.",
            "type": "boolean",
            "default": true
        },
        "rottenTomatoesMinimumScore": {
            "description": "Minimum score (0-10 scale) required for inclusion when Rotten Tomatoes data is available. Set to 0 to disable.",
            "type": "number",
            "minimum": 0,
            "maximum": 10,
            "default": 0
        },
        "showPoster": {
            "description": "Shows the poster.",
            "type": "boolean",
            "default": true
        },
        "showMetadata": {
            "description": "Shows metadata (title, tagline, etc.). Requires 'showPoster' to be enabled.",
            "type": "boolean",
            "default": true
        },
        "clockWidget": {
            "description": "Shows a clock in the top left of the screen.",
            "type": "boolean",
            "default": true
        },
        "clockTimezone": {
            "description": "Timezone for the clock widget (IANA timezone identifier like 'Europe/Amsterdam', 'America/New_York'). Defaults to system timezone.",
            "type": "string",
            "default": "auto"
        },
        "clockFormat": {
            "description": "Clock display format: '12h' for 12-hour format with AM/PM, '24h' for 24-hour format.",
            "type": "string",
            "enum": ["12h", "24h"],
            "default": "24h"
        },
        "wallartMode": {
            "description": "Enable wallart mode - displays multiple posters/covers in a grid layout. Shows many items simultaneously like a digital art gallery.",
            "type": "object",
            "properties": {
                "enabled": {
                    "type": "boolean",
                    "default": false,
                    "description": "Enable wallart mode display"
                },
                "density": {
                    "type": "string",
                    "enum": ["low", "medium", "high", "ludicrous"],
                    "default": "high",
                    "description": "Grid density preset that influences number of rows/columns"
                },
                "refreshRate": {
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 10,
                    "default": 4,
                    "description": "Relative refresh tempo (1=slow, 10=fast)"
                },
                "randomness": {
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 10,
                    "default": 2,
                    "description": "Amount of random staggering in the cycle timing"
                },
                "animationType": {
                    "type": "string",
                    "enum": [
                        "random",
                        "fade",
                        "slideLeft",
                        "slideUp",
                        "zoom",
                        "flip",
                        "staggered",
                        "ripple",
                        "scanline",
                        "parallax",
                        "neonPulse",
                        "chromaticShift",
                        "mosaicShatter"
                    ],
                    "default": "flip",
                    "description": "Animation style used for grid updates"
                },
                "layoutVariant": {
                    "type": "string",
                    "enum": ["classic", "heroGrid"],
                    "default": "heroGrid",
                    "description": "Wallart layout variant - heroGrid recommended for modern look"
                },
                "ambientGradient": {
                    "type": "boolean",
                    "default": true,
                    "description": "Enable subtle ambient gradient background overlay"
                },
                "layoutSettings": {
                    "type": "object",
                    "properties": {
                        "heroGrid": {
                            "type": "object",
                            "properties": {
                                "heroSide": {
                                    "type": "string",
                                    "enum": ["left", "right"],
                                    "default": "right",
                                    "description": "Position of the hero poster - left or right side of the grid"
                                },
                                "heroRotationMinutes": {
                                    "type": "integer",
                                    "minimum": 1,
                                    "maximum": 60,
                                    "default": 8,
                                    "description": "How often (in minutes) to rotate the hero poster"
                                },
                                "biasAmbientToHero": {
                                    "type": "boolean",
                                    "default": true,
                                    "description": "Weight ambient gradient sampling more toward the hero image"
                                }
                            }
                        }
                    }
                },
                "gamesOnly": {
                    "type": "boolean",
                    "default": false,
                    "description": "Show only game covers from RomM sources (requires RomM to be enabled and configured)"
                },
                "musicMode": {
                    "type": "object",
                    "description": "Configuration for Wallart Music Mode - displays album covers in square grid layouts",
                    "properties": {
                        "enabled": {
                            "type": "boolean",
                            "default": false,
                            "description": "Enable Music Mode - shows only album covers (cannot be combined with gamesOnly)"
                        },
                        "displayStyle": {
                            "type": "string",
                            "enum": ["covers-only", "album-info", "artist-cards"],
                            "default": "covers-only",
                            "description": "Display style: covers-only (minimal), album-info (with metadata), artist-cards (artist-focused)"
                        },
                        "animation": {
                            "type": "string",
                            "enum": ["vinyl-spin", "slide-fade", "crossfade", "flip"],
                            "default": "vinyl-spin",
                            "description": "Animation style for album transitions"
                        },
                        "density": {
                            "type": "string",
                            "enum": ["low", "medium", "high", "ludicrous"],
                            "default": "high",
                            "description": "Grid density for music mode (affects number of albums shown)"
                        },
                        "gridSize": {
                            "type": "string",
                            "enum": ["3x3", "4x4", "5x5", "6x6"],
                            "default": "4x4",
                            "description": "Grid size for album layout (square grids only)"
                        },
                        "layout": {
                            "type": "string",
                            "enum": ["grid", "hero-grid"],
                            "default": "grid",
                            "description": "Layout type: grid (uniform) or hero-grid (1 large + 16 small)"
                        },
                        "showArtist": {
                            "type": "boolean",
                            "default": true,
                            "description": "Show artist name overlay (covers-only style)"
                        },
                        "showAlbumTitle": {
                            "type": "boolean",
                            "default": true,
                            "description": "Show album title (album-info style)"
                        },
                        "showYear": {
                            "type": "boolean",
                            "default": true,
                            "description": "Show release year (album-info style)"
                        },
                        "showGenre": {
                            "type": "boolean",
                            "default": false,
                            "description": "Show genre tag (album-info style)"
                        },
                        "artistRotationSeconds": {
                            "type": "integer",
                            "minimum": 10,
                            "maximum": 600,
                            "default": 60,
                            "description": "Seconds between artist rotations (artist-cards style only)"
                        },
                        "albumRotationSeconds": {
                            "type": "integer",
                            "minimum": 5,
                            "maximum": 120,
                            "default": 15,
                            "description": "Seconds between album cover rotations within artist cards (artist-cards style only)"
                        },
                        "minRating": {
                            "type": "number",
                            "minimum": 0,
                            "maximum": 10,
                            "default": 0,
                            "description": "Minimum rating filter for music albums (0-10 scale)"
                        },
                        "sortMode": {
                            "type": "string",
                            "enum": [
                                "weighted-random",
                                "recent",
                                "popular",
                                "alphabetical",
                                "random"
                            ],
                            "default": "weighted-random",
                            "description": "Sorting mode for music albums"
                        },
                        "sortWeights": {
                            "type": "object",
                            "description": "Weights for weighted-random sorting (only applies when sortMode is weighted-random)",
                            "properties": {
                                "recent": {
                                    "type": "integer",
                                    "minimum": 0,
                                    "maximum": 100,
                                    "default": 20,
                                    "description": "Weight for recently added albums (0-100)"
                                },
                                "popular": {
                                    "type": "integer",
                                    "minimum": 0,
                                    "maximum": 100,
                                    "default": 30,
                                    "description": "Weight for popular/most played albums (0-100)"
                                },
                                "random": {
                                    "type": "integer",
                                    "minimum": 0,
                                    "maximum": 100,
                                    "default": 50,
                                    "description": "Weight for random selection (0-100)"
                                }
                            },
                            "additionalProperties": false
                        }
                    },
                    "additionalProperties": false
                }
            }
        },
        "cinemaMode": {
            "description": "Enable cinema mode for portrait displays with fullscreen poster layout.",
            "type": "boolean",
            "default": false
        },
        "cinemaOrientation": {
            "description": "Force a specific portrait orientation for cinema mode instead of relying on device sensors.",
            "type": "string",
            "enum": ["auto", "portrait", "portrait-flipped"],
            "default": "portrait-flipped"
        },
        "cinema": {
            "description": "Cinema mode overlays and presentation settings (header/footer, marquee, specs, ambilight).",
            "type": "object",
            "properties": {
                "header": {
                    "type": "object",
                    "properties": {
                        "enabled": {
                            "type": "boolean",
                            "default": true,
                            "description": "Enable cinema header display"
                        },
                        "text": {
                            "type": "string",
                            "default": "Super Cool",
                            "description": "Text to display in cinema header"
                        },
                        "style": {
                            "type": "string",
                            "enum": ["classic", "neon", "minimal", "theatre"],
                            "default": "classic",
                            "description": "Visual style for the header"
                        }
                    },
                    "additionalProperties": false,
                    "default": {
                        "enabled": true,
                        "text": "Super Cool",
                        "style": "classic"
                    }
                },
                "footer": {
                    "type": "object",
                    "properties": {
                        "enabled": {
                            "type": "boolean",
                            "default": true,
                            "description": "Enable cinema footer display"
                        },
                        "type": {
                            "type": "string",
                            "enum": ["marquee", "specs"],
                            "default": "specs",
                            "description": "Footer type - marquee scrolling text or technical specs"
                        },
                        "marqueeText": {
                            "type": "string",
                            "default": "Feature Presentation",
                            "description": "Text for marquee-style footer"
                        },
                        "marqueeStyle": {
                            "type": "string",
                            "enum": ["classic", "neon", "minimal", "theatre"],
                            "default": "classic",
                            "description": "Visual style for the marquee"
                        },
                        "specs": {
                            "type": "object",
                            "properties": {
                                "showResolution": {
                                    "type": "boolean",
                                    "default": true,
                                    "description": "Display video resolution (e.g., 4K, 1080p)"
                                },
                                "showAudio": {
                                    "type": "boolean",
                                    "default": true,
                                    "description": "Display audio format (e.g., Dolby Atmos, DTS)"
                                },
                                "showAspectRatio": {
                                    "type": "boolean",
                                    "default": true,
                                    "description": "Display aspect ratio (e.g., 2.39:1)"
                                },
                                "showFlags": {
                                    "type": "boolean",
                                    "default": true,
                                    "description": "Display content flags/badges"
                                },
                                "style": {
                                    "type": "string",
                                    "enum": ["subtle", "filled", "outline"],
                                    "default": "outline",
                                    "description": "Visual style for specs display"
                                },
                                "iconSet": {
                                    "type": "string",
                                    "enum": ["filled", "line"],
                                    "default": "filled",
                                    "description": "Icon style for specs - filled or line art"
                                }
                            },
                            "additionalProperties": false,
                            "default": {
                                "showResolution": true,
                                "showAudio": true,
                                "showAspectRatio": true,
                                "showFlags": true,
                                "style": "outline",
                                "iconSet": "filled"
                            }
                        }
                    },
                    "additionalProperties": false,
                    "default": {
                        "enabled": true,
                        "type": "specs",
                        "marqueeText": "Feature Presentation",
                        "marqueeStyle": "classic",
                        "specs": {
                            "showResolution": true,
                            "showAudio": true,
                            "showAspectRatio": true,
                            "showFlags": true,
                            "style": "outline",
                            "iconSet": "filled"
                        }
                    }
                },
                "presets": {
                    "type": "object",
                    "properties": {
                        "headerTexts": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            },
                            "default": [
                                "Coming Soon",
                                "Now Playing",
                                "Home Cinema",
                                "Feature Presentation",
                                "Super Cool"
                            ]
                        },
                        "footerTexts": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            },
                            "default": [
                                "Coming Soon",
                                "Now Playing",
                                "Home Cinema",
                                "Feature Presentation"
                            ]
                        }
                    },
                    "additionalProperties": false,
                    "default": {
                        "headerTexts": [
                            "Coming Soon",
                            "Now Playing",
                            "Home Cinema",
                            "Feature Presentation",
                            "Super Cool"
                        ],
                        "footerTexts": [
                            "Coming Soon",
                            "Now Playing",
                            "Home Cinema",
                            "Feature Presentation"
                        ]
                    }
                },
                "ambilight": {
                    "type": "object",
                    "properties": {
                        "enabled": {
                            "type": "boolean",
                            "default": true,
                            "description": "Enable ambilight effect around poster"
                        },
                        "strength": {
                            "type": "integer",
                            "minimum": 0,
                            "maximum": 100,
                            "default": 60,
                            "description": "Ambilight intensity (0-100)"
                        }
                    },
                    "additionalProperties": false,
                    "default": {
                        "enabled": true,
                        "strength": 60
                    }
                },
                "nowPlaying": {
                    "type": "object",
                    "properties": {
                        "enabled": {
                            "type": "boolean",
                            "default": false,
                            "description": "Enable Now Playing integration - show posters from active Plex sessions"
                        },
                        "priority": {
                            "type": "string",
                            "enum": ["first", "random", "user"],
                            "default": "first",
                            "description": "Session selection priority (first = first active session, random = random active session, user = specific user)"
                        },
                        "filterUser": {
                            "type": "string",
                            "default": "",
                            "description": "When priority is 'user', only show sessions from this Plex username"
                        },
                        "fallbackToRotation": {
                            "type": "boolean",
                            "default": true,
                            "const": true,
                            "description": "Always fall back to normal rotation when no active sessions (fixed behavior)"
                        },
                        "updateIntervalSeconds": {
                            "type": "integer",
                            "minimum": 5,
                            "maximum": 300,
                            "default": 15,
                            "description": "How often to check for session updates (5-300 seconds)"
                        }
                    },
                    "additionalProperties": false,
                    "default": {
                        "enabled": false,
                        "priority": "first",
                        "filterUser": "",
                        "fallbackToRotation": true,
                        "updateIntervalSeconds": 15
                    }
                },
                "rotationIntervalMinutes": {
                    "type": "number",
                    "minimum": 0,
                    "default": 0,
                    "description": "Poster rotation interval in minutes (0 = disabled, shows single random poster)"
                },
                "orientation": {
                    "type": "string",
                    "enum": ["auto", "portrait", "landscape"],
                    "default": "auto",
                    "description": "Cinema mode orientation override (auto = follow device, portrait/landscape = force orientation)"
                }
            },
            "additionalProperties": false,
            "default": {
                "orientation": "auto",
                "header": {
                    "enabled": true,
                    "text": "Super Cool",
                    "style": "classic"
                },
                "footer": {
                    "enabled": true,
                    "type": "specs",
                    "marqueeText": "Feature Presentation",
                    "marqueeStyle": "classic",
                    "specs": {
                        "showResolution": true,
                        "showAudio": true,
                        "showAspectRatio": true,
                        "showFlags": true,
                        "style": "outline",
                        "iconSet": "filled"
                    }
                },
                "ambilight": {
                    "enabled": true,
                    "strength": 60
                },
                "nowPlaying": {
                    "enabled": false,
                    "priority": "first",
                    "filterUser": "",
                    "fallbackToRotation": true,
                    "updateIntervalSeconds": 15
                },
                "rotationIntervalMinutes": 0,
                "presets": {
                    "headerTexts": [
                        "Coming Soon",
                        "Now Playing",
                        "Home Cinema",
                        "Feature Presentation",
                        "Super Cool"
                    ],
                    "footerTexts": [
                        "Coming Soon",
                        "Now Playing",
                        "Home Cinema",
                        "Feature Presentation"
                    ]
                }
            }
        },
        "transitionEffect": {
            "description": "Visual transition effect for background images and posters. Duration is automatically calculated based on transition interval.",
            "type": "string",
            "enum": ["none", "kenburns", "fade", "slide"],
            "default": "kenburns"
        },
        "effectPauseTime": {
            "description": "Time to pause after effect completes before next transition in seconds (not applied to Ken Burns effect).",
            "type": "number",
            "minimum": 0,
            "maximum": 10,
            "default": 3
        },
        "uiScaling": {
            "description": "Scaling settings for UI elements to adapt to different screen sizes and resolutions.",
            "type": "object",
            "properties": {
                "content": {
                    "type": "integer",
                    "minimum": 50,
                    "maximum": 200,
                    "default": 100,
                    "description": "Poster and metadata content size scaling percentage (50-200%)"
                },
                "clearlogo": {
                    "type": "integer",
                    "minimum": 50,
                    "maximum": 200,
                    "default": 100,
                    "description": "Clearlogo size scaling percentage (50-200%)"
                },
                "clock": {
                    "type": "integer",
                    "minimum": 50,
                    "maximum": 200,
                    "default": 100,
                    "description": "Clock widget size scaling percentage (50-200%)"
                },
                "global": {
                    "type": "integer",
                    "minimum": 50,
                    "maximum": 200,
                    "default": 100,
                    "description": "Global scaling multiplier for all UI elements (50-200%)"
                }
            },
            "required": ["content", "clearlogo", "clock", "global"]
        },
        "mediaServers": {
            "description": "An array of media server configurations.",
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "name": {
                        "type": "string",
                        "description": "A friendly name for this server.",
                        "minLength": 1
                    },
                    "type": {
                        "type": "string",
                        "enum": ["plex", "jellyfin", "romm"],
                        "description": "The type of the media server."
                    },
                    "enabled": {
                        "type": "boolean",
                        "description": "Whether this server configuration is active."
                    },
                    "hostname": {
                        "type": "string",
                        "description": "Direct hostname or IP. Mandatory for enabled servers.",
                        "minLength": 1
                    },
                    "port": {
                        "type": "integer",
                        "description": "Direct TCP port. Mandatory for enabled servers.",
                        "minimum": 1
                    },
                    "tokenEnvVar": {
                        "type": "string",
                        "description": "Environment variable containing the authentication token (token itself stays out of config.json).",
                        "minLength": 1
                    },
                    "token": {
                        "type": "string",
                        "description": "Optional direct token/API key (NOT recommended â€“ prefer tokenEnvVar).",
                        "minLength": 1
                    },
                    "movieLibraryNames": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "showLibraryNames": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "musicLibraryNames": {
                        "type": "array",
                        "description": "List of Plex music library names to include for Music Mode (Plex only).",
                        "items": {
                            "type": "string"
                        },
                        "default": []
                    },
                    "musicFilters": {
                        "type": "object",
                        "description": "Filtering options for music content (Plex only).",
                        "properties": {
                            "genres": {
                                "type": "array",
                                "description": "List of allowed music genres (empty = all genres).",
                                "items": {
                                    "type": "string"
                                },
                                "default": []
                            },
                            "artists": {
                                "type": "array",
                                "description": "List of specific artists to include (empty = all artists).",
                                "items": {
                                    "type": "string"
                                },
                                "default": []
                            },
                            "minRating": {
                                "type": "number",
                                "description": "Minimum album rating (0-10 scale).",
                                "minimum": 0,
                                "maximum": 10,
                                "default": 0
                            },
                            "sortMode": {
                                "type": "string",
                                "description": "Album sorting algorithm.",
                                "enum": [
                                    "weighted-random",
                                    "recent",
                                    "popular",
                                    "alphabetical",
                                    "random"
                                ],
                                "default": "weighted-random"
                            },
                            "sortWeights": {
                                "type": "object",
                                "description": "Weights for weighted-random sorting algorithm.",
                                "properties": {
                                    "recent": {
                                        "type": "number",
                                        "description": "Weight for recently added albums (0-100).",
                                        "minimum": 0,
                                        "maximum": 100,
                                        "default": 20
                                    },
                                    "popular": {
                                        "type": "number",
                                        "description": "Weight for highly rated albums (0-100).",
                                        "minimum": 0,
                                        "maximum": 100,
                                        "default": 30
                                    },
                                    "random": {
                                        "type": "number",
                                        "description": "Weight for random selection (0-100).",
                                        "minimum": 0,
                                        "maximum": 100,
                                        "default": 50
                                    }
                                },
                                "additionalProperties": false
                            }
                        },
                        "additionalProperties": false,
                        "default": {
                            "genres": [],
                            "artists": [],
                            "minRating": 0,
                            "sortWeights": {
                                "recent": 20,
                                "popular": 30,
                                "random": 50
                            }
                        }
                    },
                    "recentlyAddedOnly": {
                        "type": "boolean",
                        "description": "Only fetch recently added items.",
                        "default": false
                    },
                    "recentlyAddedDays": {
                        "type": "integer",
                        "description": "Number of days to consider as 'recently added'.",
                        "minimum": 1,
                        "default": 30
                    },
                    "ratingFilter": {
                        "type": "array",
                        "description": "List of allowed content ratings (e.g., ['G', 'PG', 'PG-13']).",
                        "items": {
                            "type": "string"
                        }
                    },
                    "yearFilter": {
                        "type": ["integer", "string", "null"],
                        "description": "Release year filter: number (>=) or comma-separated years/ranges like '2010, 2015-2020'.",
                        "default": null
                    },
                    "genreFilter": {
                        "type": "string",
                        "description": "Comma-separated list of allowed genres for filtering content.",
                        "default": ""
                    },
                    "qualityFilter": {
                        "type": "string",
                        "description": "Optional quality filter e.g. '4k,1080p'.",
                        "default": ""
                    },
                    "ratingFilters": {
                        "type": "object",
                        "description": "Rating-based filtering options (Jellyfin only).",
                        "properties": {
                            "minCommunityRating": {
                                "type": "number",
                                "description": "Minimum community rating (0-10 scale).",
                                "minimum": 0,
                                "maximum": 10,
                                "default": 0
                            },
                            "allowedOfficialRatings": {
                                "type": "array",
                                "description": "List of allowed MPAA ratings (e.g., ['G', 'PG', 'PG-13']).",
                                "items": {
                                    "type": "string"
                                }
                            },
                            "minUserRating": {
                                "type": "number",
                                "description": "Minimum user rating (personal rating 0-10 scale).",
                                "minimum": 0,
                                "maximum": 10,
                                "default": 0
                            }
                        }
                    },
                    "url": {
                        "type": "string",
                        "description": "Full URL for RomM server (for type=romm only). Example: http://romm-server:8080",
                        "minLength": 1
                    },
                    "username": {
                        "type": "string",
                        "description": "Username for RomM authentication (for type=romm only).",
                        "minLength": 1
                    },
                    "password": {
                        "type": "string",
                        "description": "Password for RomM authentication (for type=romm only).",
                        "minLength": 1
                    },
                    "selectedPlatforms": {
                        "type": "array",
                        "description": "List of platform slugs to include (for type=romm only). Empty = all platforms.",
                        "items": {
                            "type": "string"
                        }
                    },
                    "insecureHttps": {
                        "type": "boolean",
                        "description": "Allow self-signed or invalid HTTPS certificates (for type=romm only).",
                        "default": false
                    }
                },
                "required": ["name", "type", "enabled"]
            }
        },
        "siteServer": {
            "description": "Configuration for the optional public-facing site server.",
            "type": "object",
            "properties": {
                "enabled": {
                    "type": "boolean",
                    "default": true,
                    "description": "Enable promotional site server on separate port"
                },
                "port": {
                    "type": "integer",
                    "minimum": 1024,
                    "maximum": 65535,
                    "default": 4001,
                    "description": "Port for promotional site (default 4001)"
                }
            },
            "required": ["enabled", "port"]
        },
        "deviceMgmt": {
            "description": "Feature flag for device management UI and APIs.",
            "type": "object",
            "properties": {
                "enabled": {
                    "type": "boolean",
                    "default": true,
                    "description": "Enable device management features"
                },
                "bypass": {
                    "description": "Optional bypass configuration. When a client IP matches ipAllowList, the frontend will skip device management (no registration, no heartbeats, no websocket). Useful for kiosk screens or trusted internal dashboards.",
                    "type": "object",
                    "properties": {
                        "ipAllowList": {
                            "description": "Array of IP addresses or CIDR ranges (IPv4/IPv6) that should bypass device management.",
                            "type": "array",
                            "items": {
                                "type": "string"
                            },
                            "default": ["127.0.0.1", "10.255.0.0/16"]
                        }
                    },
                    "additionalProperties": false,
                    "default": {
                        "ipAllowList": ["127.0.0.1", "10.255.0.0/16"]
                    }
                }
            }
        },
        "clientDebugViewer": {
            "description": "Client-side debug viewer for live troubleshooting on display devices",
            "type": "object",
            "properties": {
                "enabled": {
                    "type": "boolean",
                    "default": false,
                    "description": "Enable semi-transparent debug log viewer overlay on screensaver, wallart, and cinema modes"
                }
            },
            "additionalProperties": false,
            "default": {
                "enabled": false
            }
        },
        "mqtt": {
            "description": "MQTT integration for Home Assistant and other automation platforms",
            "type": "object",
            "properties": {
                "enabled": {
                    "type": "boolean",
                    "default": true,
                    "description": "Enable MQTT integration"
                },
                "broker": {
                    "type": "object",
                    "properties": {
                        "host": {
                            "type": "string",
                            "default": "your-server-address",
                            "description": "MQTT broker hostname or IP"
                        },
                        "port": {
                            "type": "integer",
                            "default": 1883,
                            "minimum": 1,
                            "maximum": 65535,
                            "description": "MQTT broker port"
                        },
                        "username": {
                            "type": "string",
                            "default": "mqtt",
                            "description": "MQTT broker username (optional)"
                        },
                        "passwordEnvVar": {
                            "type": "string",
                            "default": "MQTT_PASSWORD",
                            "description": "Environment variable containing MQTT password"
                        },
                        "password": {
                            "type": "string",
                            "default": "",
                            "description": "MQTT password (direct, less secure than passwordEnvVar)"
                        }
                    },
                    "required": ["host", "port"],
                    "additionalProperties": false,
                    "default": {
                        "host": "your-server-address",
                        "port": 1883,
                        "username": "mqtt",
                        "passwordEnvVar": "MQTT_PASSWORD"
                    }
                },
                "discovery": {
                    "type": "object",
                    "properties": {
                        "enabled": {
                            "type": "boolean",
                            "default": true,
                            "description": "Enable Home Assistant MQTT Discovery"
                        }
                    },
                    "additionalProperties": false,
                    "default": {
                        "enabled": true
                    }
                },
                "externalUrl": {
                    "type": "string",
                    "description": "External URL for Home Assistant to access Posterrama (e.g., http://192.168.1.100:4000). If not set, uses baseUrl from main config."
                },
                "availability": {
                    "type": "object",
                    "properties": {
                        "enabled": {
                            "type": "boolean",
                            "default": true,
                            "description": "Publish availability status for devices"
                        },
                        "timeout": {
                            "type": "integer",
                            "default": 60,
                            "minimum": 10,
                            "maximum": 600,
                            "description": "Seconds after last heartbeat to mark device offline"
                        }
                    },
                    "additionalProperties": false,
                    "default": {
                        "enabled": true,
                        "timeout": 60
                    }
                }
            },
            "additionalProperties": false,
            "default": {
                "enabled": true,
                "broker": {
                    "host": "your-server-address",
                    "port": 1883,
                    "username": "mqtt",
                    "passwordEnvVar": "MQTT_PASSWORD"
                },
                "externalUrl": "your-server-address",
                "discovery": {
                    "enabled": true
                },
                "availability": {
                    "enabled": true,
                    "timeout": 60
                }
            }
        },
        "tmdbSource": {
            "description": "Optional TMDB source configuration.",
            "type": "object",
            "properties": {
                "enabled": {
                    "type": "boolean",
                    "default": false,
                    "description": "Enable TMDB as a media source"
                },
                "category": {
                    "type": "string",
                    "default": "popular",
                    "description": "TMDB category to fetch (popular, top_rated, now_playing, upcoming)"
                },
                "minRating": {
                    "type": "number",
                    "minimum": 0,
                    "maximum": 10,
                    "default": 8,
                    "description": "Minimum TMDB rating to include (0-10)"
                },
                "apiKey": {
                    "type": "string",
                    "default": "your-api-key-here",
                    "description": "TMDB API key"
                },
                "genreFilter": {
                    "type": "string",
                    "default": "",
                    "description": "Comma-separated genre IDs to filter by"
                }
            }
        },
        "streamingSources": {
            "description": "List of additional streaming sources (reserved for future use).",
            "type": "array",
            "items": {
                "type": "object"
            },
            "default": []
        },
        "cache": {
            "description": "Cache tuning parameters.",
            "type": "object",
            "properties": {
                "maxSizeGB": {
                    "type": "number",
                    "minimum": 0,
                    "default": 2,
                    "description": "Maximum cache size in gigabytes"
                }
            }
        },
        "serverName": {
            "description": "Friendly name for this Posterrama instance.",
            "type": "string",
            "default": "Your Server Name"
        },
        "baseUrl": {
            "description": "Base URL where this instance is reachable (for links/tooling).",
            "type": "string",
            "default": "your-server-address"
        },
        "port": {
            "description": "Optional explicit port override for integrations/tests.",
            "type": "integer",
            "minimum": 1,
            "maximum": 65535
        },
        "plexClientOptions": {
            "description": "Advanced options to pass to the plex-api client.",
            "type": "object",
            "default": {}
        },
        "serverPort": {
            "description": "The port that the server listens on for HTTP connections.",
            "type": "integer",
            "minimum": 1,
            "maximum": 65535,
            "default": 4000
        },
        "backups": {
            "description": "Configuration for automated backups of configuration files.",
            "type": "object",
            "properties": {
                "enabled": {
                    "description": "Whether automated backups are enabled.",
                    "type": "boolean",
                    "default": true
                },
                "time": {
                    "description": "Time of day to run backups in HH:MM format (24-hour).",
                    "type": "string",
                    "pattern": "^([01]?[0-9]|2[0-3]):[0-5][0-9]$",
                    "default": "03:30"
                },
                "retention": {
                    "description": "Number of backup sets to retain (1-60).",
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 60,
                    "default": 5
                }
            },
            "required": ["enabled", "time", "retention"],
            "additionalProperties": false
        },
        "rootRoute": {
            "description": "Behavior for the entry route '/': landing page or redirect to a default mode.",
            "type": "object",
            "properties": {
                "behavior": {
                    "description": "How '/' should behave: 'landing' serves index.html, 'redirect' issues a temporary redirect.",
                    "type": "string",
                    "enum": ["landing", "redirect"],
                    "default": "landing"
                },
                "defaultMode": {
                    "description": "Target mode for redirect when behavior is 'redirect'. Optional; if omitted, the active Display Settings mode will be used.",
                    "type": "string",
                    "enum": ["screensaver", "wallart", "cinema"],
                    "default": "screensaver"
                },
                "statusCode": {
                    "description": "HTTP status code to use for redirect (temporary only).",
                    "type": "integer",
                    "enum": [302, 307],
                    "default": 302
                },
                "bypassParam": {
                    "description": "Query parameter name that, when present, forces landing (useful for admin/dev).",
                    "type": "string",
                    "default": "landing"
                }
            },
            "additionalProperties": false,
            "default": {
                "behavior": "landing",
                "defaultMode": "screensaver",
                "statusCode": 302,
                "bypassParam": "landing"
            }
        },
        "testKeyConfig": {
            "type": "string",
            "default": "fromConfig",
            "description": "Test configuration key (for testing purposes only)"
        },
        "someInt": {
            "type": "number",
            "default": 42,
            "description": "Test integer value (for testing purposes only)"
        },
        "localDirectory": {
            "description": "Local directory support for managing poster collections and generating posterpacks.",
            "type": "object",
            "properties": {
                "enabled": {
                    "description": "Enable local directory as a media source.",
                    "type": "boolean",
                    "default": true
                },
                "rootPath": {
                    "description": "Root path for local media directory. Must be an absolute path.",
                    "type": "string",
                    "default": "media"
                },
                "watchDirectories": {
                    "description": "Additional absolute directories to scan/watch as local media roots (same expected subfolders as rootPath).",
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "default": []
                },
                "posterpackGeneration": {
                    "description": "Configuration for automatic posterpack generation from Plex/Jellyfin.",
                    "type": "object",
                    "properties": {
                        "itemConcurrency": {
                            "description": "Maximum number of media items to process in parallel.",
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 10,
                            "default": 3
                        },
                        "assetConcurrency": {
                            "description": "Maximum number of assets (posters, backgrounds, etc.) to download in parallel per item.",
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 20,
                            "default": 5
                        },
                        "maxInflightDownloads": {
                            "description": "Maximum total number of simultaneous asset downloads across all items.",
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 50,
                            "default": 10
                        },
                        "retryMaxRetries": {
                            "description": "Maximum number of retry attempts for failed downloads.",
                            "type": "integer",
                            "minimum": 0,
                            "maximum": 10,
                            "default": 4
                        },
                        "retryBaseDelay": {
                            "description": "Base delay in milliseconds between retry attempts (uses exponential backoff).",
                            "type": "integer",
                            "minimum": 100,
                            "maximum": 5000,
                            "default": 250
                        }
                    },
                    "additionalProperties": false
                }
            },
            "additionalProperties": false
        },
        "previewOrientation": {
            "type": "string",
            "default": "landscape",
            "description": "Default orientation for preview mode (landscape or portrait)"
        }
    },
    "required": [
        "transitionIntervalSeconds",
        "backgroundRefreshMinutes",
        "showClearLogo",
        "showRottenTomatoes",
        "rottenTomatoesMinimumScore",
        "showPoster",
        "showMetadata",
        "clockWidget",
        "transitionEffect",
        "effectPauseTime",
        "mediaServers"
    ]
}
